"use strict";(self.webpackChunksavannah_bites=self.webpackChunksavannah_bites||[]).push([[32],{8253:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);var r=a(579);const t=e=>{let{currentStep:s}=e;return(0,r.jsxs)("div",{className:"progress-steps-reservation",children:[(0,r.jsxs)("div",{className:"progress-step-wrapper-reservation",children:[(0,r.jsxs)("div",{className:"progress-step-container-reservation",children:[(0,r.jsx)("div",{className:"progress-step-circle-reservation "+(s>=1?"active":""),children:"1"}),(0,r.jsx)("div",{className:"progress-line-reservation "+(s>=2?"active":"")})]}),(0,r.jsx)("span",{className:"progress-step-label-reservation",children:"Reservation Details"})]}),(0,r.jsxs)("div",{className:"progress-step-wrapper-reservation",children:[(0,r.jsx)("div",{className:"progress-step-container-reservation",children:(0,r.jsx)("div",{className:"progress-step-circle-reservation "+(s>=2?"active":""),children:"2"})}),(0,r.jsx)("span",{className:"progress-step-label-reservation",children:"Confirmation"})]})]})}},8032:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var r=a(5043),t=a(3216),l=a(6213),i=a(8253),n=a(579);const o="http://10.77.228.19:5000/api",c=l.A.create({baseURL:o.endsWith("/api")?o:`${o}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}}),d=["11:00 AM","1:00 PM","3:00 PM","5:00 PM","7:00 PM","9:00 PM"],m={guests:"",name:"",email:"",phone:"",allergies:""},u=()=>{const e=(0,t.Zp)(),s=(new Date).toISOString().split("T")[0],[a,o]=(0,r.useState)(s),[u,h]=(0,r.useState)(""),[v,p]=(0,r.useState)(m),[x,j]=(0,r.useState)({}),[g,b]=(0,r.useState)(!1),[f,N]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=document.getElementById("date");return e&&(e.min=s),()=>{j({}),N("")}}),[s]);const y=(0,r.useCallback)((async()=>{if(!a)return;const e=new AbortController;try{b(!0),N("");const s=await c.get(`/reservations/availability/${a}`,{signal:e.signal});"success"===s.data.status&&s.data.availability?j(s.data.availability):j(d.reduce(((e,s)=>(e[s]=10,e)),{}))}catch(s){l.A.isCancel(s)||(console.error("Error fetching availability:",s),j(d.reduce(((e,s)=>(e[s]=10,e)),{})),N("Failed to fetch availability. Please try again."))}finally{b(!1)}}),[a]);(0,r.useEffect)((()=>{const e=a?setTimeout(y,300):null;return()=>e&&clearTimeout(e)}),[a,y]);const C=e=>{const{id:s,value:a}=e.target;p((e=>({...e,[s]:a}))),N("")},P=e=>{x[e]>0&&(h(e),N(""))};return(0,n.jsx)("div",{className:"reservation-page-wrapper",children:(0,n.jsxs)("div",{className:"reservation-page",children:[(0,n.jsx)("header",{className:"reservation-header",children:(0,n.jsxs)("div",{className:"header-content",children:[(0,n.jsx)("h1",{children:"Make a Reservation"}),(0,n.jsx)("p",{className:"tagline",children:"Book Your Table at Savannah Bites"})]})}),(0,n.jsx)("main",{className:"reservation-main",children:(0,n.jsxs)("div",{className:"reservation-content",children:[(0,n.jsx)(i.A,{currentStep:1}),f&&(0,n.jsx)("div",{className:"error-message",role:"alert",children:f}),(0,n.jsx)("div",{className:"reservation-form-container",children:(0,n.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),a?u?v.name.trim()?v.email.trim()?v.phone.trim()?v.guests||(N("Please select number of guests"),0):(N("Please enter your phone number"),0):(N("Please enter your email"),0):(N("Please enter your name"),0):(N("Please select a time slot"),0):(N("Please select a date"),0))try{b(!0),N("");const s={...v,date:a,time:u},r=await c.post("/reservations",s);if("success"!==r.data.status||!r.data.data)throw new Error(r.data.message||"Failed to create reservation");e("/reservation-confirmation",{state:{reservationId:r.data.data.reservationId,reservation:{...s,id:r.data.data.reservationId,status:r.data.data.status}}})}catch(o){var r,t,l,i,n;console.error("Submission error:",o),N((null===(r=o.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||(null===(l=o.response)||void 0===l||null===(i=l.data)||void 0===i||null===(n=i.errors)||void 0===n?void 0:n.join(", "))||"Failed to submit reservation. Please try again.")}finally{b(!1)}},noValidate:!0,children:[(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h2",{children:"Choose Your Date & Time"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"date",children:"Select Date:"}),(0,n.jsx)("input",{type:"date",id:"date",required:!0,min:s,value:a,onChange:e=>{const s=new Date(e.target.value),a=new Date;a.setHours(0,0,0,0),s.setHours(0,0,0,0),s>=a?(o(e.target.value),h("")):(alert("Please select a future date"),o(a))}})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Available Time Slots:"}),(0,n.jsx)("div",{className:"time-slots",children:d.map((e=>(0,n.jsxs)("div",{className:`time-slot ${u===e?"selected":""} ${0===x[e]?"full":""}`,onClick:()=>P(e),role:"button",tabIndex:0,onKeyPress:s=>{"Enter"!==s.key&&" "!==s.key||P(e)},"aria-label":`Select ${e}`,"aria-disabled":0===x[e],children:[(0,n.jsx)("span",{className:"time",children:e}),(0,n.jsxs)("span",{className:"tables-left",children:[x[e]||0," tables available"]})]},e)))})]})]})]}),(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsx)("h2",{children:"Guest Information"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"guests",children:"Number of Guests:"}),(0,n.jsxs)("select",{id:"guests",required:!0,value:v.guests,onChange:C,children:[(0,n.jsx)("option",{value:"",children:"Select number of guests"}),[1,2,3,4,5,6].map((e=>(0,n.jsxs)("option",{value:e,children:[e," ",1===e?"person":"people"]},e))),(0,n.jsx)("option",{value:"7+",children:"7 or more (we'll contact you)"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Full Name:"}),(0,n.jsx)("input",{type:"text",id:"name",required:!0,value:v.name,onChange:C,placeholder:"Enter your full name"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,n.jsx)("input",{type:"email",id:"email",required:!0,value:v.email,onChange:C,placeholder:"Enter your email address"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"phone",children:"Phone Number:"}),(0,n.jsx)("input",{type:"tel",id:"phone",required:!0,value:v.phone,onChange:C,placeholder:"Enter your phone number"})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[(0,n.jsx)("label",{htmlFor:"allergies",children:"Any Food Allergies?"}),(0,n.jsx)("textarea",{id:"allergies",value:v.allergies,onChange:C,placeholder:"List any allergies (optional)"})]})]})]}),(0,n.jsx)("div",{className:"form-actions",children:(0,n.jsx)("button",{type:"submit",className:"submit-button "+(g?"submitting":""),disabled:g,children:g?"Processing...":"Confirm Reservation"})})]})})]})})]})})}}}]);
//# sourceMappingURL=32.3a46be3c.chunk.js.map