"use strict";(self.webpackChunksavannah_bites=self.webpackChunksavannah_bites||[]).push([[993],{3993:(e,s,a)=>{a.r(s),a.d(s,{default:()=>L});var i=a(5043),l=a(6213),n=a(5169),t=a(1092),c=a(2591),o=a(5066),r=a(2040),d=a(4440),m=a(4240),p=a(742),u=a(6819),h=a(6624),j=a(3462),g=a(1316),x=a(5653),N=a(8666),b=a(4223),v=a(5243),k=a(6501),f=a(5030),C=a(5807),y=a(6808),S=a(9010),w=a(8344),z=a(230),A=a(1421),$=a(4191),F=a(579);l.A.defaults.withCredentials=!0;const D="http://10.77.228.19:5000/api";console.log("Using API URL:",D);const M={"suya-skewers.png":t,"jollof-rice.jpg":c,"malva-pudding.png":o,"moi-moi.jpg":r,"puff-puff.jpg":d,"jamaican-patties.jpg":p,"egusi-soup.jpg":m,"calulu.jpg":u,"cachupa.jpg":h,"chin-chin.jpg":j,"banana-flambe.jpg":g,"randburg-sun.jpg":x,"water.jpg":N,"coca-cola.jpg":b,"ice-tea.jpg":v,"compal.jpg":k,"strawberry-milkshake.jpg":f,"chocolate-milkshake.jpg":C,"vanilla-milkshake.jpg":y,"oreo-milkshake.jpg":S,"apple-somersby.jpg":w,"super-bock.jpg":z,"stella-artois.jpg":A,"cuca.jpg":$},P={Starters:1,"Main Dishes":2,Desserts:3,"Soft Drinks":4,Milkshakes:5,"Alcoholic Drinks":6},_=e=>M[e]||"https://via.placeholder.com/150",E=e=>{if(!e)return"N/A";if("object"===typeof e){const s=e.small,a=e.medium,i=e.large;return s&&a&&i?`\xa3${s.toFixed(2)} - \xa3${i.toFixed(2)}`:`\xa3${(s||a||i).toFixed(2)}`}return`\xa3${e.toFixed(2)}`};const L=function(){const[e,s]=(0,i.useState)([]),[a,t]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0),[r,d]=(0,i.useState)(!1),[m,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(null),[j,g]=(0,i.useState)(!1),[x,N]=(0,i.useState)(null),{addToCart:b}=(0,n._)(),v=(0,i.useMemo)((()=>[...e].sort(((e,s)=>(P[e.category]||999)-(P[s.category]||999)))),[e]),k=(0,i.useCallback)((async()=>{try{o(!0),d(!1);const e=`${D.endsWith("/api")?D:`${D}/api`}/menu`;console.log("Fetching from:",e);const a=await(0,l.A)({method:"get",url:e,headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:5e3});if("success"!==a.data.status)throw new Error(a.data.message||"Failed to fetch menu data");s(a.data.data)}catch(i){var e,a;console.error("Error fetching menu items:",i),console.error("Error details:",{message:i.message,response:i.response,config:i.config}),d(!0),p((null===(e=i.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||i.message||"Failed to load menu items. Please check your connection.")}finally{o(!1)}}),[]);(0,i.useEffect)((()=>{k()}),[k]);const f=(0,i.useCallback)((function(e){let s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s=a?e.price[a]:"object"===typeof e.price?e.price.small:e.price;const i={...e,id:e._id,selectedPrice:s,size:a||("object"===typeof e.price?"small":null)};b(i),g(!1),h(null)}),[b]),C=e=>{N(e),g(!0)};return c?(0,F.jsx)("div",{className:"loading-container",children:(0,F.jsx)("div",{className:"loading-spinner",children:"Loading menu..."})}):r?(0,F.jsxs)("div",{className:"error-container",children:[(0,F.jsx)("p",{className:"error-message",children:m}),(0,F.jsx)("button",{className:"retry-button",onClick:k,disabled:c,children:"Retry Loading Menu"})]}):(0,F.jsx)("div",{className:"menu-page-wrapper",children:(0,F.jsxs)("div",{className:"menu-page",children:[(0,F.jsx)("header",{className:"menu-header",children:(0,F.jsxs)("div",{className:"header-content",children:[(0,F.jsx)("h1",{className:"menu-title",children:"Savannah Delicious Online Menu"}),(0,F.jsx)("p",{className:"tagline",children:"Deliver to you at Savannah Bites"})]})}),(0,F.jsx)("div",{className:"menu-categories",children:v.length>0?v.map((e=>(0,F.jsxs)("div",{className:"menu-category",children:[(0,F.jsx)("h2",{className:"category-title",children:e.category}),(0,F.jsx)("div",{className:"menu-items",children:e.items.map((e=>(0,F.jsxs)("div",{className:"menu-item",children:[(0,F.jsx)("img",{src:_(e.image),alt:e.name,className:"menu-item-image"}),(0,F.jsxs)("div",{className:"menu-item-details",children:[(0,F.jsx)("h3",{children:e.name}),(0,F.jsx)("p",{className:"price",children:E(e.price)}),(0,F.jsxs)("div",{className:"menu-item-buttons",children:["object"===typeof e.price?(0,F.jsx)("button",{className:"size-button",onClick:()=>C(e),"aria-label":`Choose size for ${e.name}`,children:"Choose Size"}):(0,F.jsx)("button",{className:"add-to-cart-button",onClick:()=>f(e),"aria-label":`Add ${e.name} to cart`,children:"Add to Cart"}),(0,F.jsx)("button",{className:"view-more-button",onClick:()=>{t(e)},"aria-label":`View details of ${e.name}`,children:"View More"})]})]})]},e._id)))})]},e.category))):(0,F.jsx)("p",{className:"no-items-message",children:"No menu items available at the moment."})}),j&&x&&(0,F.jsx)("div",{className:"modal-overlay",onClick:()=>g(!1),children:(0,F.jsxs)("div",{className:"size-modal",onClick:e=>e.stopPropagation(),children:[(0,F.jsx)("button",{className:"close-button",onClick:()=>g(!1),"aria-label":"Close size selection",children:"\xd7"}),(0,F.jsx)("h3",{children:x.name}),(0,F.jsx)("p",{children:"Select a Size:"}),(0,F.jsx)("div",{className:"size-options",children:Object.entries(x.price).map((e=>{let[s,a]=e;return(0,F.jsxs)("button",{className:"size-option "+(u===s?"selected":""),onClick:()=>((e,s)=>{h(s),f(e,s)})(x,s),children:[(0,F.jsx)("span",{className:"size-name",children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,F.jsxs)("span",{className:"size-price",children:["\xa3",a.toFixed(2)]})]},s)}))})]})}),a&&(0,F.jsx)("div",{className:"modal-overlay",onClick:()=>t(null),children:(0,F.jsx)("div",{className:"dish-details-modal",onClick:e=>e.stopPropagation(),children:(0,F.jsxs)("div",{className:"modal-content",children:[(0,F.jsx)("button",{className:"close-button",onClick:()=>t(null),"aria-label":"Close dish details",children:"\xd7"}),(0,F.jsx)("h2",{children:a.name}),(0,F.jsx)("img",{src:_(a.image),alt:a.name,className:"modal-image"}),(0,F.jsx)("p",{className:"description",children:a.description||"No description available."}),(0,F.jsxs)("p",{className:"ingredients",children:[(0,F.jsx)("strong",{children:"Ingredients:"})," ",a.ingredients||"Not available."]}),a.story&&(0,F.jsx)("p",{className:"story",children:a.story}),(0,F.jsx)("p",{className:"modal-price",children:E(a.price)}),"object"===typeof a.price?(0,F.jsx)("button",{className:"modal-size-button",onClick:()=>{t(null),C(a)},children:"Choose Size"}):(0,F.jsx)("button",{className:"modal-add-button",onClick:()=>{f(a),t(null)},children:"Add to Cart"})]})})})]})})}}}]);
//# sourceMappingURL=993.89d84216.chunk.js.map