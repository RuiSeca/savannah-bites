{"ast":null,"code":"// src/utils/mealDeals.js\n\nexport const MEAL_DEALS = {\n  FAMILY_FEAST: {\n    id: \"family_feast\",\n    name: \"Family Feast\",\n    price: 89.99,\n    requirements: {\n      \"Main Dishes\": {\n        count: 2,\n        size: \"large\"\n      },\n      Starters: {\n        count: 2,\n        size: \"any\"\n      },\n      \"Soft Drinks\": {\n        count: 2,\n        size: \"large\"\n      },\n      Desserts: {\n        count: 1,\n        size: \"any\"\n      }\n    },\n    description: \"2 large main courses + 2 starters + 2 large drinks + 1 dessert\",\n    savings: \"Save up to £35\",\n    timeRestrictions: null\n  },\n  LUNCH_SPECIAL: {\n    id: \"lunch_special\",\n    name: \"Lunch Special\",\n    price: 17.99,\n    requirements: {\n      \"Main Dishes\": {\n        count: 1,\n        size: \"any\"\n      },\n      \"Soft Drinks\": {\n        count: 1,\n        size: \"any\"\n      },\n      Desserts: {\n        count: 1,\n        size: \"any\"\n      }\n    },\n    description: \"Main course + drink + dessert\",\n    savings: \"Save up to £12\",\n    timeRestrictions: {\n      days: [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"],\n      startTime: \"11:00\",\n      endTime: \"15:00\"\n    }\n  },\n  SOLO_TRIP: {\n    id: \"solo_trip\",\n    name: \"Solo Trip Special\",\n    price: 18.99,\n    requirements: {\n      \"Main Dishes\": {\n        count: 1,\n        size: \"any\"\n      },\n      Starters: {\n        count: 1,\n        size: \"any\"\n      },\n      \"Soft Drinks\": {\n        count: 1,\n        size: \"any\"\n      }\n    },\n    description: \"Main course + starter + drink\",\n    savings: \"Save up to £8\",\n    timeRestrictions: null\n  }\n};\nexport const isWithinTimeRestrictions = restrictions => {\n  if (!restrictions) return true;\n  const now = new Date();\n  const currentDay = now.toLocaleDateString(\"en-US\", {\n    weekday: \"long\"\n  });\n  const currentTime = now.toLocaleTimeString(\"en-US\", {\n    hour12: false,\n    hour: \"2-digit\",\n    minute: \"2-digit\"\n  });\n  return restrictions.days.includes(currentDay) && currentTime >= restrictions.startTime && currentTime <= restrictions.endTime;\n};\nexport const calculateDealSavings = (regularPrice, dealPrice) => {\n  return Math.max(0, regularPrice - dealPrice);\n};\nexport const formatDealRequirements = requirements => {\n  return Object.entries(requirements).map(([category, {\n    count,\n    size\n  }]) => ({\n    category,\n    count,\n    size,\n    text: `${count}x ${category}${size !== \"any\" ? ` (${size})` : \"\"}`\n  }));\n};\nexport const validateDealRequirements = (deal, cartItems) => {\n  if (!deal || !(cartItems !== null && cartItems !== void 0 && cartItems.length)) return {\n    isValid: false,\n    missing: []\n  };\n  const itemsByCategory = cartItems.reduce((acc, item) => {\n    const category = item.category || \"uncategorized\";\n    if (!acc[category]) acc[category] = [];\n    acc[category].push(item);\n    return acc;\n  }, {});\n  const results = Object.entries(deal.requirements).map(([category, requirement]) => {\n    const items = itemsByCategory[category] || [];\n    const validItems = items.filter(item => requirement.size === \"any\" || item.size === requirement.size);\n    const totalCount = validItems.reduce((sum, item) => sum + item.quantity, 0);\n    return {\n      category,\n      required: requirement.count,\n      current: totalCount,\n      isValid: totalCount >= requirement.count,\n      missing: Math.max(0, requirement.count - totalCount)\n    };\n  });\n  return {\n    isValid: results.every(r => r.isValid),\n    results,\n    missing: results.filter(r => !r.isValid)\n  };\n};","map":{"version":3,"names":["MEAL_DEALS","FAMILY_FEAST","id","name","price","requirements","count","size","Starters","Desserts","description","savings","timeRestrictions","LUNCH_SPECIAL","days","startTime","endTime","SOLO_TRIP","isWithinTimeRestrictions","restrictions","now","Date","currentDay","toLocaleDateString","weekday","currentTime","toLocaleTimeString","hour12","hour","minute","includes","calculateDealSavings","regularPrice","dealPrice","Math","max","formatDealRequirements","Object","entries","map","category","text","validateDealRequirements","deal","cartItems","length","isValid","missing","itemsByCategory","reduce","acc","item","push","results","requirement","items","validItems","filter","totalCount","sum","quantity","required","current","every","r"],"sources":["C:/Users/Rui Seca/savannah-bites/frontend/src/utils/mealDeals.js"],"sourcesContent":["// src/utils/mealDeals.js\r\n\r\nexport const MEAL_DEALS = {\r\n  FAMILY_FEAST: {\r\n    id: \"family_feast\",\r\n    name: \"Family Feast\",\r\n    price: 89.99,\r\n    requirements: {\r\n      \"Main Dishes\": { count: 2, size: \"large\" },\r\n      Starters: { count: 2, size: \"any\" },\r\n      \"Soft Drinks\": { count: 2, size: \"large\" },\r\n      Desserts: { count: 1, size: \"any\" },\r\n    },\r\n    description:\r\n      \"2 large main courses + 2 starters + 2 large drinks + 1 dessert\",\r\n    savings: \"Save up to £35\",\r\n    timeRestrictions: null,\r\n  },\r\n  LUNCH_SPECIAL: {\r\n    id: \"lunch_special\",\r\n    name: \"Lunch Special\",\r\n    price: 17.99,\r\n    requirements: {\r\n      \"Main Dishes\": { count: 1, size: \"any\" },\r\n      \"Soft Drinks\": { count: 1, size: \"any\" },\r\n      Desserts: { count: 1, size: \"any\" },\r\n    },\r\n    description: \"Main course + drink + dessert\",\r\n    savings: \"Save up to £12\",\r\n    timeRestrictions: {\r\n      days: [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"],\r\n      startTime: \"11:00\",\r\n      endTime: \"15:00\",\r\n    },\r\n  },\r\n  SOLO_TRIP: {\r\n    id: \"solo_trip\",\r\n    name: \"Solo Trip Special\",\r\n    price: 18.99,\r\n    requirements: {\r\n      \"Main Dishes\": { count: 1, size: \"any\" },\r\n      Starters: { count: 1, size: \"any\" },\r\n      \"Soft Drinks\": { count: 1, size: \"any\" },\r\n    },\r\n    description: \"Main course + starter + drink\",\r\n    savings: \"Save up to £8\",\r\n    timeRestrictions: null,\r\n  },\r\n};\r\n\r\nexport const isWithinTimeRestrictions = (restrictions) => {\r\n  if (!restrictions) return true;\r\n\r\n  const now = new Date();\r\n  const currentDay = now.toLocaleDateString(\"en-US\", { weekday: \"long\" });\r\n  const currentTime = now.toLocaleTimeString(\"en-US\", {\r\n    hour12: false,\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n\r\n  return (\r\n    restrictions.days.includes(currentDay) &&\r\n    currentTime >= restrictions.startTime &&\r\n    currentTime <= restrictions.endTime\r\n  );\r\n};\r\n\r\nexport const calculateDealSavings = (regularPrice, dealPrice) => {\r\n  return Math.max(0, regularPrice - dealPrice);\r\n};\r\n\r\nexport const formatDealRequirements = (requirements) => {\r\n  return Object.entries(requirements).map(([category, { count, size }]) => ({\r\n    category,\r\n    count,\r\n    size,\r\n    text: `${count}x ${category}${size !== \"any\" ? ` (${size})` : \"\"}`,\r\n  }));\r\n};\r\n\r\nexport const validateDealRequirements = (deal, cartItems) => {\r\n  if (!deal || !cartItems?.length) return { isValid: false, missing: [] };\r\n\r\n  const itemsByCategory = cartItems.reduce((acc, item) => {\r\n    const category = item.category || \"uncategorized\";\r\n    if (!acc[category]) acc[category] = [];\r\n    acc[category].push(item);\r\n    return acc;\r\n  }, {});\r\n\r\n  const results = Object.entries(deal.requirements).map(\r\n    ([category, requirement]) => {\r\n      const items = itemsByCategory[category] || [];\r\n      const validItems = items.filter(\r\n        (item) => requirement.size === \"any\" || item.size === requirement.size\r\n      );\r\n      const totalCount = validItems.reduce(\r\n        (sum, item) => sum + item.quantity,\r\n        0\r\n      );\r\n\r\n      return {\r\n        category,\r\n        required: requirement.count,\r\n        current: totalCount,\r\n        isValid: totalCount >= requirement.count,\r\n        missing: Math.max(0, requirement.count - totalCount),\r\n      };\r\n    }\r\n  );\r\n\r\n  return {\r\n    isValid: results.every((r) => r.isValid),\r\n    results,\r\n    missing: results.filter((r) => !r.isValid),\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}