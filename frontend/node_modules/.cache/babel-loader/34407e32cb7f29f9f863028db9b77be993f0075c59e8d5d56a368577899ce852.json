{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rui Seca\\\\savannah-bites\\\\frontend\\\\src\\\\components\\\\PaymentPage\\\\index.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { PaymentElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { useCart } from \"../../context/CartContext\";\nimport ProgressSteps from \"../ProgressSteps/index.jsx\";\nimport \"./styles.css\";\n\n// Stripe initialization\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\n// API configuration\nconst apiUrl = process.env.NODE_ENV === \"development\" ? process.env.REACT_APP_NGROK_URL || process.env.REACT_APP_API_BASE_URL : process.env.REACT_APP_API_BASE_URL;\n\n// Create axios instance with default config\nconst api = axios.create({\n  baseURL: apiUrl,\n  withCredentials: true,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nfunction CheckoutForm() {\n  _s();\n  var _location$state;\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    cart,\n    clearCart\n  } = useCart();\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n  const orderDetails = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.orderDetails;\n\n  // Validate order details\n  useEffect(() => {\n    if (!(orderDetails !== null && orderDetails !== void 0 && orderDetails.customerInfo) || !cart.length) {\n      navigate(\"/checkout\");\n    }\n  }, [orderDetails, cart, navigate]);\n  const calculateTotals = () => {\n    const subtotal = cart.reduce((sum, item) => sum + (item.selectedPrice || item.price) * item.quantity, 0);\n    const deliveryFee = 2.5;\n    return {\n      subtotal,\n      deliveryFee,\n      total: subtotal + deliveryFee\n    };\n  };\n  const createOrder = async paymentIntent => {\n    try {\n      const {\n        subtotal,\n        deliveryFee,\n        total\n      } = calculateTotals();\n      const orderData = {\n        paymentIntentId: paymentIntent.id,\n        orderDetails: {\n          items: cart.map(item => ({\n            id: item._id || item.id,\n            name: item.name,\n            quantity: item.quantity,\n            price: item.selectedPrice || item.price,\n            size: item.size || \"regular\"\n          })),\n          subtotal,\n          deliveryFee,\n          totalAmount: total,\n          customerInfo: orderDetails.customerInfo\n        }\n      };\n      const response = await api.post(\"/orders\", orderData);\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Order creation failed:\", error);\n      throw new Error(\"Failed to create order: \" + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message));\n    }\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!stripe || !elements || isProcessing) {\n      return;\n    }\n    try {\n      setIsProcessing(true);\n      setError(null);\n      const {\n        error: submitError\n      } = await elements.submit();\n      if (submitError) {\n        throw submitError;\n      }\n      const {\n        error: paymentError,\n        paymentIntent\n      } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${window.location.origin}/confirmation`,\n          payment_method_data: {\n            billing_details: {\n              name: orderDetails.customerInfo.name,\n              email: orderDetails.customerInfo.email,\n              phone: orderDetails.customerInfo.phone,\n              address: {\n                line1: orderDetails.customerInfo.address,\n                city: orderDetails.customerInfo.city,\n                postal_code: orderDetails.customerInfo.postcode,\n                country: \"GB\"\n              }\n            }\n          }\n        },\n        redirect: \"if_required\"\n      });\n      if (paymentError) {\n        throw paymentError;\n      }\n      if (paymentIntent.status === \"succeeded\") {\n        const {\n          orderId\n        } = await createOrder(paymentIntent);\n        clearCart();\n        navigate(\"/confirmation\", {\n          state: {\n            orderId,\n            status: \"success\",\n            paymentIntentId: paymentIntent.id\n          },\n          replace: true\n        });\n      }\n    } catch (error) {\n      console.error(\"Payment/Order error:\", error);\n      setError(error.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  const {\n    subtotal,\n    total\n  } = calculateTotals();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-container\",\n    children: [/*#__PURE__*/_jsxDEV(ProgressSteps, {\n      currentStep: 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Secure Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"items-list\",\n          children: cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"item-name\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this), item.size && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"item-size\",\n                children: item.size\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-price\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"quantity\",\n                children: [\"x\", item.quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price\",\n                children: [\"\\xA3\", ((item.selectedPrice || item.price) * item.quantity).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this)]\n          }, `${item.id || item._id}-${item.size || \"regular\"}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-breakdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\xA3\", subtotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Delivery Fee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\xA32.50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total to Pay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\xA3\", total.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"delivery-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Delivery Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), (orderDetails === null || orderDetails === void 0 ? void 0 : orderDetails.customerInfo) && Object.entries(orderDetails.customerInfo).map(([key, value]) => key !== \"email\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [key.charAt(0).toUpperCase() + key.slice(1), \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 19\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"payment-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-element-container\",\n        children: /*#__PURE__*/_jsxDEV(PaymentElement, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        role: \"alert\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"payment-button\",\n        disabled: !stripe || isProcessing,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-content\",\n          children: isProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner\",\n              role: \"status\",\n              \"aria-label\": \"Processing payment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Processing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Pay \\xA3\", total.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutForm, \"na5PFFw6chbSUMgTqbnM1WwBVyM=\", false, function () {\n  return [useStripe, useElements, useNavigate, useLocation, useCart];\n});\n_c = CheckoutForm;\nfunction PaymentPage() {\n  _s2();\n  var _location$state2;\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const [error, setError] = useState(null);\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    cart\n  } = useCart();\n  const orderDetails = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.orderDetails;\n  useEffect(() => {\n    if (!orderDetails || !(cart !== null && cart !== void 0 && cart.length)) {\n      navigate(\"/checkout\");\n      return;\n    }\n    const createPaymentIntent = async () => {\n      try {\n        const response = await api.post(\"/orders/create-payment-intent\", {\n          amount: orderDetails.totalAmount,\n          currency: \"gbp\"\n        });\n        setClientSecret(response.data.clientSecret);\n      } catch (error) {\n        var _error$response2, _error$response2$data;\n        console.error(\"Payment setup error:\", error);\n        setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Failed to setup payment. Please try again.\");\n      }\n    };\n    createPaymentIntent();\n  }, [cart, orderDetails, navigate]);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      role: \"alert\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Payment Setup Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/checkout\"),\n        className: \"return-button\",\n        children: \"Return to Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this);\n  }\n  if (!clientSecret) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      role: \"status\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Setting up payment...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    children: /*#__PURE__*/_jsxDEV(Elements, {\n      stripe: stripePromise,\n      options: {\n        clientSecret,\n        appearance: {\n          theme: \"stripe\",\n          variables: {\n            colorPrimary: \"#0a5c66\",\n            colorBackground: \"#ffffff\",\n            colorText: \"#30313d\"\n          }\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(CheckoutForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 315,\n    columnNumber: 5\n  }, this);\n}\n_s2(PaymentPage, \"aDNKusgezv9q3SH/CUvy39hgiwI=\", false, function () {\n  return [useLocation, useNavigate, useCart];\n});\n_c2 = PaymentPage;\nexport default PaymentPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"CheckoutForm\");\n$RefreshReg$(_c2, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","Elements","PaymentElement","useStripe","useElements","loadStripe","useNavigate","useLocation","useCart","ProgressSteps","jsxDEV","_jsxDEV","Fragment","_Fragment","stripePromise","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","apiUrl","NODE_ENV","REACT_APP_NGROK_URL","REACT_APP_API_BASE_URL","api","create","baseURL","withCredentials","headers","CheckoutForm","_s","_location$state","stripe","elements","navigate","location","cart","clearCart","isProcessing","setIsProcessing","error","setError","orderDetails","state","customerInfo","length","calculateTotals","subtotal","reduce","sum","item","selectedPrice","price","quantity","deliveryFee","total","createOrder","paymentIntent","orderData","paymentIntentId","id","items","map","_id","name","size","totalAmount","response","post","data","_error$response","_error$response$data","console","Error","message","handleSubmit","event","preventDefault","submitError","submit","paymentError","confirmPayment","confirmParams","return_url","window","origin","payment_method_data","billing_details","email","phone","address","line1","city","postal_code","postcode","country","redirect","status","orderId","replace","className","children","currentStep","fileName","_jsxFileName","lineNumber","columnNumber","toFixed","Object","entries","key","value","charAt","toUpperCase","slice","onSubmit","role","type","disabled","_c","PaymentPage","_s2","_location$state2","clientSecret","setClientSecret","createPaymentIntent","amount","currency","_error$response2","_error$response2$data","onClick","options","appearance","theme","variables","colorPrimary","colorBackground","colorText","_c2","$RefreshReg$"],"sources":["C:/Users/Rui Seca/savannah-bites/frontend/src/components/PaymentPage/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport {\r\n  PaymentElement,\r\n  useStripe,\r\n  useElements,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useCart } from \"../../context/CartContext\";\r\nimport ProgressSteps from \"../ProgressSteps/index.jsx\";\r\nimport \"./styles.css\";\r\n\r\n// Stripe initialization\r\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\r\n\r\n// API configuration\r\nconst apiUrl =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? process.env.REACT_APP_NGROK_URL || process.env.REACT_APP_API_BASE_URL\r\n    : process.env.REACT_APP_API_BASE_URL;\r\n\r\n// Create axios instance with default config\r\nconst api = axios.create({\r\n  baseURL: apiUrl,\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nfunction CheckoutForm() {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { cart, clearCart } = useCart();\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const orderDetails = location.state?.orderDetails;\r\n\r\n  // Validate order details\r\n  useEffect(() => {\r\n    if (!orderDetails?.customerInfo || !cart.length) {\r\n      navigate(\"/checkout\");\r\n    }\r\n  }, [orderDetails, cart, navigate]);\r\n\r\n  const calculateTotals = () => {\r\n    const subtotal = cart.reduce(\r\n      (sum, item) => sum + (item.selectedPrice || item.price) * item.quantity,\r\n      0\r\n    );\r\n    const deliveryFee = 2.5;\r\n    return {\r\n      subtotal,\r\n      deliveryFee,\r\n      total: subtotal + deliveryFee,\r\n    };\r\n  };\r\n\r\n  const createOrder = async (paymentIntent) => {\r\n    try {\r\n      const { subtotal, deliveryFee, total } = calculateTotals();\r\n\r\n      const orderData = {\r\n        paymentIntentId: paymentIntent.id,\r\n        orderDetails: {\r\n          items: cart.map((item) => ({\r\n            id: item._id || item.id,\r\n            name: item.name,\r\n            quantity: item.quantity,\r\n            price: item.selectedPrice || item.price,\r\n            size: item.size || \"regular\",\r\n          })),\r\n          subtotal,\r\n          deliveryFee,\r\n          totalAmount: total,\r\n          customerInfo: orderDetails.customerInfo,\r\n        },\r\n      };\r\n\r\n      const response = await api.post(\"/orders\", orderData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Order creation failed:\", error);\r\n      throw new Error(\r\n        \"Failed to create order: \" +\r\n          (error.response?.data?.message || error.message)\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!stripe || !elements || isProcessing) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsProcessing(true);\r\n      setError(null);\r\n\r\n      const { error: submitError } = await elements.submit();\r\n      if (submitError) {\r\n        throw submitError;\r\n      }\r\n\r\n      const { error: paymentError, paymentIntent } =\r\n        await stripe.confirmPayment({\r\n          elements,\r\n          confirmParams: {\r\n            return_url: `${window.location.origin}/confirmation`,\r\n            payment_method_data: {\r\n              billing_details: {\r\n                name: orderDetails.customerInfo.name,\r\n                email: orderDetails.customerInfo.email,\r\n                phone: orderDetails.customerInfo.phone,\r\n                address: {\r\n                  line1: orderDetails.customerInfo.address,\r\n                  city: orderDetails.customerInfo.city,\r\n                  postal_code: orderDetails.customerInfo.postcode,\r\n                  country: \"GB\",\r\n                },\r\n              },\r\n            },\r\n          },\r\n          redirect: \"if_required\",\r\n        });\r\n\r\n      if (paymentError) {\r\n        throw paymentError;\r\n      }\r\n\r\n      if (paymentIntent.status === \"succeeded\") {\r\n        const { orderId } = await createOrder(paymentIntent);\r\n        clearCart();\r\n        navigate(\"/confirmation\", {\r\n          state: {\r\n            orderId,\r\n            status: \"success\",\r\n            paymentIntentId: paymentIntent.id,\r\n          },\r\n          replace: true,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Payment/Order error:\", error);\r\n      setError(error.message);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const { subtotal, total } = calculateTotals();\r\n\r\n  return (\r\n    <div className=\"payment-container\">\r\n      <ProgressSteps currentStep={2} />\r\n\r\n      <div className=\"payment-header\">\r\n        <h1>Secure Payment</h1>\r\n        <div className=\"order-summary\">\r\n          <h2>Order Summary</h2>\r\n          <div className=\"items-list\">\r\n            {cart.map((item) => (\r\n              <div\r\n                key={`${item.id || item._id}-${item.size || \"regular\"}`}\r\n                className=\"order-item\"\r\n              >\r\n                <div className=\"item-info\">\r\n                  <span className=\"item-name\">{item.name}</span>\r\n                  {item.size && <span className=\"item-size\">{item.size}</span>}\r\n                </div>\r\n                <div className=\"item-price\">\r\n                  <span className=\"quantity\">x{item.quantity}</span>\r\n                  <span className=\"price\">\r\n                    £\r\n                    {(\r\n                      (item.selectedPrice || item.price) * item.quantity\r\n                    ).toFixed(2)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"price-breakdown\">\r\n            <div className=\"price-row\">\r\n              <span>Subtotal</span>\r\n              <span>£{subtotal.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"price-row\">\r\n              <span>Delivery Fee</span>\r\n              <span>£2.50</span>\r\n            </div>\r\n            <div className=\"price-row total\">\r\n              <span>Total to Pay</span>\r\n              <span>£{total.toFixed(2)}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"delivery-info\">\r\n          <h3>Delivery Details</h3>\r\n          {orderDetails?.customerInfo &&\r\n            Object.entries(orderDetails.customerInfo).map(\r\n              ([key, value]) =>\r\n                key !== \"email\" && (\r\n                  <div key={key} className=\"info-row\">\r\n                    <span>{key.charAt(0).toUpperCase() + key.slice(1)}:</span>\r\n                    <span>{value}</span>\r\n                  </div>\r\n                )\r\n            )}\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"payment-form\">\r\n        <div className=\"payment-element-container\">\r\n          <PaymentElement />\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"error-message\" role=\"alert\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"payment-button\"\r\n          disabled={!stripe || isProcessing}\r\n        >\r\n          <div className=\"button-content\">\r\n            {isProcessing ? (\r\n              <>\r\n                <div\r\n                  className=\"spinner\"\r\n                  role=\"status\"\r\n                  aria-label=\"Processing payment\"\r\n                />\r\n                <span>Processing...</span>\r\n              </>\r\n            ) : (\r\n              <span>Pay £{total.toFixed(2)}</span>\r\n            )}\r\n          </div>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PaymentPage() {\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { cart } = useCart();\r\n\r\n  const orderDetails = location.state?.orderDetails;\r\n\r\n  useEffect(() => {\r\n    if (!orderDetails || !cart?.length) {\r\n      navigate(\"/checkout\");\r\n      return;\r\n    }\r\n\r\n    const createPaymentIntent = async () => {\r\n      try {\r\n        const response = await api.post(\"/orders/create-payment-intent\", {\r\n          amount: orderDetails.totalAmount,\r\n          currency: \"gbp\",\r\n        });\r\n\r\n        setClientSecret(response.data.clientSecret);\r\n      } catch (error) {\r\n        console.error(\"Payment setup error:\", error);\r\n        setError(\r\n          error.response?.data?.message ||\r\n            \"Failed to setup payment. Please try again.\"\r\n        );\r\n      }\r\n    };\r\n\r\n    createPaymentIntent();\r\n  }, [cart, orderDetails, navigate]);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"error-container\" role=\"alert\">\r\n        <h2>Payment Setup Failed</h2>\r\n        <p>{error}</p>\r\n        <button onClick={() => navigate(\"/checkout\")} className=\"return-button\">\r\n          Return to Checkout\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!clientSecret) {\r\n    return (\r\n      <div className=\"loading-container\" role=\"status\">\r\n        <div className=\"spinner\" />\r\n        <p>Setting up payment...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"payment-page\">\r\n      <Elements\r\n        stripe={stripePromise}\r\n        options={{\r\n          clientSecret,\r\n          appearance: {\r\n            theme: \"stripe\",\r\n            variables: {\r\n              colorPrimary: \"#0a5c66\",\r\n              colorBackground: \"#ffffff\",\r\n              colorText: \"#30313d\",\r\n            },\r\n          },\r\n        }}\r\n      >\r\n        <CheckoutForm />\r\n      </Elements>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PaymentPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}