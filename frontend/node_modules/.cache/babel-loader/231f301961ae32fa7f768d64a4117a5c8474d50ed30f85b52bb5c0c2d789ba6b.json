{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rui Seca\\\\savannah-bites\\\\frontend\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/CartContext.js\n\nimport React, { createContext, useContext, useState, useCallback, useEffect, useMemo } from \"react\";\nimport { isWithinTimeRestrictions } from \"../utils/mealDeals\"; // Removed MEAL_DEALS import\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nconst CART_STORAGE_KEY = \"savannah_bites_cart\";\nconst DEALS_STORAGE_KEY = \"savannah_bites_deals\";\nconst CART_TIMEOUT = 15 * 60 * 1000; // 15 minutes in milliseconds\n\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [cart, setCart] = useState(() => {\n    try {\n      const savedCart = localStorage.getItem(CART_STORAGE_KEY);\n      return savedCart ? JSON.parse(savedCart) : [];\n    } catch (error) {\n      console.error(\"Error loading cart from storage:\", error);\n      return [];\n    }\n  });\n  const [activeDeal, setActiveDeal] = useState(() => {\n    try {\n      const savedDeal = localStorage.getItem(DEALS_STORAGE_KEY);\n      if (!savedDeal) return null;\n      const deal = JSON.parse(savedDeal);\n      if (deal && deal.timeRestrictions && !isWithinTimeRestrictions(deal.timeRestrictions)) {\n        localStorage.removeItem(DEALS_STORAGE_KEY);\n        return null;\n      }\n      return deal;\n    } catch (error) {\n      console.error(\"Error loading deal from storage:\", error);\n      return null;\n    }\n  });\n  const [lastUpdated, setLastUpdated] = useState(() => {\n    const savedTimestamp = localStorage.getItem(\"cart_last_updated\");\n    return savedTimestamp ? parseInt(savedTimestamp, 10) : Date.now();\n  });\n  const clearCart = useCallback(() => {\n    setCart([]);\n    setActiveDeal(null);\n    localStorage.removeItem(CART_STORAGE_KEY);\n    localStorage.removeItem(DEALS_STORAGE_KEY);\n    localStorage.removeItem(\"cart_last_updated\");\n    setLastUpdated(Date.now());\n  }, []);\n  useEffect(() => {\n    try {\n      localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));\n      if (activeDeal) {\n        localStorage.setItem(DEALS_STORAGE_KEY, JSON.stringify(activeDeal));\n      } else {\n        localStorage.removeItem(DEALS_STORAGE_KEY);\n      }\n      setLastUpdated(Date.now());\n      localStorage.setItem(\"cart_last_updated\", Date.now().toString());\n    } catch (error) {\n      console.error(\"Error saving cart/deals to storage:\", error);\n    }\n  }, [cart, activeDeal]);\n\n  // Cart timeout effect - with clearCart dependency\n  useEffect(() => {\n    const checkTimeout = () => {\n      const now = Date.now();\n      if (cart.length > 0 && now - lastUpdated > CART_TIMEOUT) {\n        console.log(\"Cart timeout - clearing cart\");\n        clearCart();\n      }\n    };\n    const timeoutInterval = setInterval(checkTimeout, 60000);\n    return () => clearInterval(timeoutInterval);\n  }, [lastUpdated, cart.length, clearCart]); // Added clearCart to dependencies\n\n  const getItemKey = useCallback((id, size) => `${id}-${size || \"default\"}`, []);\n  const getItemPrice = useCallback(item => {\n    if (!item) return 0;\n    if (typeof item.price === \"object\") {\n      return item.selectedPrice || item.price[item.size] || Object.values(item.price)[0];\n    }\n    return item.price;\n  }, []);\n  const checkDealRequirements = useCallback((deal, cartItems) => {\n    if (!deal || !cartItems) return false;\n    const itemsByCategory = cartItems.reduce((acc, item) => {\n      if (!acc[item.category]) {\n        acc[item.category] = [];\n      }\n      acc[item.category].push(item);\n      return acc;\n    }, {});\n    return Object.entries(deal.requirements).every(([category, requirement]) => {\n      const categoryItems = itemsByCategory[category] || [];\n      const validItems = categoryItems.filter(item => requirement.size === \"any\" || item.size === requirement.size);\n      const totalCount = validItems.reduce((sum, item) => sum + item.quantity, 0);\n      return totalCount >= requirement.count;\n    });\n  }, []);\n  const startDeal = useCallback(deal => {\n    if (!deal) return;\n    if (deal.timeRestrictions && !isWithinTimeRestrictions(deal.timeRestrictions)) {\n      console.log(\"Deal is not available at this time\");\n      return;\n    }\n    setActiveDeal({\n      ...deal,\n      startedAt: new Date().toISOString()\n    });\n  }, []);\n  const cancelDeal = useCallback(() => {\n    setActiveDeal(null);\n    localStorage.removeItem(DEALS_STORAGE_KEY);\n  }, []);\n  const addToCart = useCallback(item => {\n    if (!item) return;\n    setCart(currentCart => {\n      const itemKey = getItemKey(item.id, item.size);\n      const existingItemIndex = currentCart.findIndex(cartItem => getItemKey(cartItem.id, cartItem.size) === itemKey);\n      let updatedCart;\n      if (existingItemIndex !== -1) {\n        updatedCart = currentCart.map((cartItem, index) => index === existingItemIndex ? {\n          ...cartItem,\n          quantity: cartItem.quantity + 1\n        } : cartItem);\n      } else {\n        updatedCart = [...currentCart, {\n          ...item,\n          quantity: 1,\n          cartItemId: itemKey,\n          addedAt: new Date().toISOString()\n        }];\n      }\n      return updatedCart;\n    });\n  }, [getItemKey]);\n  const removeFromCart = useCallback((itemId, size = null) => {\n    setCart(currentCart => {\n      const itemKey = getItemKey(itemId, size);\n      const updatedCart = currentCart.filter(item => getItemKey(item.id, item.size) !== itemKey);\n      if (activeDeal && !checkDealRequirements(activeDeal, updatedCart)) {\n        cancelDeal();\n      }\n      return updatedCart;\n    });\n  }, [getItemKey, activeDeal, checkDealRequirements, cancelDeal]);\n  const updateQuantity = useCallback((itemId, newQuantity, size = null) => {\n    if (newQuantity < 1) {\n      removeFromCart(itemId, size);\n      return;\n    }\n    setCart(currentCart => {\n      const itemKey = getItemKey(itemId, size);\n      const updatedCart = currentCart.map(item => getItemKey(item.id, item.size) === itemKey ? {\n        ...item,\n        quantity: newQuantity\n      } : item);\n      if (activeDeal && !checkDealRequirements(activeDeal, updatedCart)) {\n        cancelDeal();\n      }\n      return updatedCart;\n    });\n  }, [getItemKey, removeFromCart, activeDeal, checkDealRequirements, cancelDeal]);\n  const cartTotal = useCallback(() => {\n    if (activeDeal && checkDealRequirements(activeDeal, cart)) {\n      return activeDeal.price;\n    }\n    return cart.reduce((total, item) => {\n      const price = getItemPrice(item);\n      return total + price * item.quantity;\n    }, 0);\n  }, [cart, activeDeal, checkDealRequirements, getItemPrice]);\n  const cartItemsCount = useCallback(() => {\n    return cart.reduce((total, item) => total + item.quantity, 0);\n  }, [cart]);\n  const isItemInCart = useCallback((itemId, size = null) => {\n    const itemKey = getItemKey(itemId, size);\n    return cart.some(item => getItemKey(item.id, item.size) === itemKey);\n  }, [cart, getItemKey]);\n  const updateItemNote = useCallback((itemId, note, size = null) => {\n    setCart(currentCart => {\n      const itemKey = getItemKey(itemId, size);\n      return currentCart.map(item => getItemKey(item.id, item.size) === itemKey ? {\n        ...item,\n        note\n      } : item);\n    });\n  }, [getItemKey]);\n  const value = useMemo(() => ({\n    cart,\n    activeDeal,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    cartTotal,\n    cartItemsCount,\n    isItemInCart,\n    updateItemNote,\n    startDeal,\n    cancelDeal,\n    checkDealRequirements,\n    getItemPrice\n  }), [cart, activeDeal, addToCart, removeFromCart, updateQuantity, clearCart, cartTotal, cartItemsCount, isItemInCart, updateItemNote, startDeal, cancelDeal, checkDealRequirements, getItemPrice]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 302,\n    columnNumber: 10\n  }, this);\n}\n_s(CartProvider, \"onEfiOUAenh7bHAMwbCeokSaf+s=\");\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error(\"useCart must be used within a CartProvider\");\n  }\n  return context;\n}\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","useEffect","useMemo","isWithinTimeRestrictions","jsxDEV","_jsxDEV","CartContext","CART_STORAGE_KEY","DEALS_STORAGE_KEY","CART_TIMEOUT","CartProvider","children","_s","cart","setCart","savedCart","localStorage","getItem","JSON","parse","error","console","activeDeal","setActiveDeal","savedDeal","deal","timeRestrictions","removeItem","lastUpdated","setLastUpdated","savedTimestamp","parseInt","Date","now","clearCart","setItem","stringify","toString","checkTimeout","length","log","timeoutInterval","setInterval","clearInterval","getItemKey","id","size","getItemPrice","item","price","selectedPrice","Object","values","checkDealRequirements","cartItems","itemsByCategory","reduce","acc","category","push","entries","requirements","every","requirement","categoryItems","validItems","filter","totalCount","sum","quantity","count","startDeal","startedAt","toISOString","cancelDeal","addToCart","currentCart","itemKey","existingItemIndex","findIndex","cartItem","updatedCart","map","index","cartItemId","addedAt","removeFromCart","itemId","updateQuantity","newQuantity","cartTotal","total","cartItemsCount","isItemInCart","some","updateItemNote","note","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","context","undefined","Error","$RefreshReg$"],"sources":["C:/Users/Rui Seca/savannah-bites/frontend/src/context/CartContext.js"],"sourcesContent":["// src/context/CartContext.js\r\n\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\";\r\nimport { isWithinTimeRestrictions } from \"../utils/mealDeals\"; // Removed MEAL_DEALS import\r\n\r\nconst CartContext = createContext();\r\n\r\nconst CART_STORAGE_KEY = \"savannah_bites_cart\";\r\nconst DEALS_STORAGE_KEY = \"savannah_bites_deals\";\r\nconst CART_TIMEOUT = 15 * 60 * 1000; // 15 minutes in milliseconds\r\n\r\nexport function CartProvider({ children }) {\r\n  const [cart, setCart] = useState(() => {\r\n    try {\r\n      const savedCart = localStorage.getItem(CART_STORAGE_KEY);\r\n      return savedCart ? JSON.parse(savedCart) : [];\r\n    } catch (error) {\r\n      console.error(\"Error loading cart from storage:\", error);\r\n      return [];\r\n    }\r\n  });\r\n\r\n  const [activeDeal, setActiveDeal] = useState(() => {\r\n    try {\r\n      const savedDeal = localStorage.getItem(DEALS_STORAGE_KEY);\r\n      if (!savedDeal) return null;\r\n\r\n      const deal = JSON.parse(savedDeal);\r\n      if (\r\n        deal &&\r\n        deal.timeRestrictions &&\r\n        !isWithinTimeRestrictions(deal.timeRestrictions)\r\n      ) {\r\n        localStorage.removeItem(DEALS_STORAGE_KEY);\r\n        return null;\r\n      }\r\n      return deal;\r\n    } catch (error) {\r\n      console.error(\"Error loading deal from storage:\", error);\r\n      return null;\r\n    }\r\n  });\r\n\r\n  const [lastUpdated, setLastUpdated] = useState(() => {\r\n    const savedTimestamp = localStorage.getItem(\"cart_last_updated\");\r\n    return savedTimestamp ? parseInt(savedTimestamp, 10) : Date.now();\r\n  });\r\n\r\n  const clearCart = useCallback(() => {\r\n    setCart([]);\r\n    setActiveDeal(null);\r\n    localStorage.removeItem(CART_STORAGE_KEY);\r\n    localStorage.removeItem(DEALS_STORAGE_KEY);\r\n    localStorage.removeItem(\"cart_last_updated\");\r\n    setLastUpdated(Date.now());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));\r\n      if (activeDeal) {\r\n        localStorage.setItem(DEALS_STORAGE_KEY, JSON.stringify(activeDeal));\r\n      } else {\r\n        localStorage.removeItem(DEALS_STORAGE_KEY);\r\n      }\r\n      setLastUpdated(Date.now());\r\n      localStorage.setItem(\"cart_last_updated\", Date.now().toString());\r\n    } catch (error) {\r\n      console.error(\"Error saving cart/deals to storage:\", error);\r\n    }\r\n  }, [cart, activeDeal]);\r\n\r\n  // Cart timeout effect - with clearCart dependency\r\n  useEffect(() => {\r\n    const checkTimeout = () => {\r\n      const now = Date.now();\r\n      if (cart.length > 0 && now - lastUpdated > CART_TIMEOUT) {\r\n        console.log(\"Cart timeout - clearing cart\");\r\n        clearCart();\r\n      }\r\n    };\r\n\r\n    const timeoutInterval = setInterval(checkTimeout, 60000);\r\n    return () => clearInterval(timeoutInterval);\r\n  }, [lastUpdated, cart.length, clearCart]); // Added clearCart to dependencies\r\n\r\n  const getItemKey = useCallback(\r\n    (id, size) => `${id}-${size || \"default\"}`,\r\n    []\r\n  );\r\n\r\n  const getItemPrice = useCallback((item) => {\r\n    if (!item) return 0;\r\n    if (typeof item.price === \"object\") {\r\n      return (\r\n        item.selectedPrice ||\r\n        item.price[item.size] ||\r\n        Object.values(item.price)[0]\r\n      );\r\n    }\r\n    return item.price;\r\n  }, []);\r\n\r\n  const checkDealRequirements = useCallback((deal, cartItems) => {\r\n    if (!deal || !cartItems) return false;\r\n\r\n    const itemsByCategory = cartItems.reduce((acc, item) => {\r\n      if (!acc[item.category]) {\r\n        acc[item.category] = [];\r\n      }\r\n      acc[item.category].push(item);\r\n      return acc;\r\n    }, {});\r\n\r\n    return Object.entries(deal.requirements).every(\r\n      ([category, requirement]) => {\r\n        const categoryItems = itemsByCategory[category] || [];\r\n        const validItems = categoryItems.filter(\r\n          (item) => requirement.size === \"any\" || item.size === requirement.size\r\n        );\r\n        const totalCount = validItems.reduce(\r\n          (sum, item) => sum + item.quantity,\r\n          0\r\n        );\r\n        return totalCount >= requirement.count;\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  const startDeal = useCallback((deal) => {\r\n    if (!deal) return;\r\n    if (\r\n      deal.timeRestrictions &&\r\n      !isWithinTimeRestrictions(deal.timeRestrictions)\r\n    ) {\r\n      console.log(\"Deal is not available at this time\");\r\n      return;\r\n    }\r\n    setActiveDeal({ ...deal, startedAt: new Date().toISOString() });\r\n  }, []);\r\n\r\n  const cancelDeal = useCallback(() => {\r\n    setActiveDeal(null);\r\n    localStorage.removeItem(DEALS_STORAGE_KEY);\r\n  }, []);\r\n\r\n  const addToCart = useCallback(\r\n    (item) => {\r\n      if (!item) return;\r\n\r\n      setCart((currentCart) => {\r\n        const itemKey = getItemKey(item.id, item.size);\r\n        const existingItemIndex = currentCart.findIndex(\r\n          (cartItem) => getItemKey(cartItem.id, cartItem.size) === itemKey\r\n        );\r\n\r\n        let updatedCart;\r\n        if (existingItemIndex !== -1) {\r\n          updatedCart = currentCart.map((cartItem, index) =>\r\n            index === existingItemIndex\r\n              ? { ...cartItem, quantity: cartItem.quantity + 1 }\r\n              : cartItem\r\n          );\r\n        } else {\r\n          updatedCart = [\r\n            ...currentCart,\r\n            {\r\n              ...item,\r\n              quantity: 1,\r\n              cartItemId: itemKey,\r\n              addedAt: new Date().toISOString(),\r\n            },\r\n          ];\r\n        }\r\n\r\n        return updatedCart;\r\n      });\r\n    },\r\n    [getItemKey]\r\n  );\r\n\r\n  const removeFromCart = useCallback(\r\n    (itemId, size = null) => {\r\n      setCart((currentCart) => {\r\n        const itemKey = getItemKey(itemId, size);\r\n        const updatedCart = currentCart.filter(\r\n          (item) => getItemKey(item.id, item.size) !== itemKey\r\n        );\r\n\r\n        if (activeDeal && !checkDealRequirements(activeDeal, updatedCart)) {\r\n          cancelDeal();\r\n        }\r\n\r\n        return updatedCart;\r\n      });\r\n    },\r\n    [getItemKey, activeDeal, checkDealRequirements, cancelDeal]\r\n  );\r\n\r\n  const updateQuantity = useCallback(\r\n    (itemId, newQuantity, size = null) => {\r\n      if (newQuantity < 1) {\r\n        removeFromCart(itemId, size);\r\n        return;\r\n      }\r\n\r\n      setCart((currentCart) => {\r\n        const itemKey = getItemKey(itemId, size);\r\n        const updatedCart = currentCart.map((item) =>\r\n          getItemKey(item.id, item.size) === itemKey\r\n            ? { ...item, quantity: newQuantity }\r\n            : item\r\n        );\r\n\r\n        if (activeDeal && !checkDealRequirements(activeDeal, updatedCart)) {\r\n          cancelDeal();\r\n        }\r\n\r\n        return updatedCart;\r\n      });\r\n    },\r\n    [getItemKey, removeFromCart, activeDeal, checkDealRequirements, cancelDeal]\r\n  );\r\n\r\n  const cartTotal = useCallback(() => {\r\n    if (activeDeal && checkDealRequirements(activeDeal, cart)) {\r\n      return activeDeal.price;\r\n    }\r\n\r\n    return cart.reduce((total, item) => {\r\n      const price = getItemPrice(item);\r\n      return total + price * item.quantity;\r\n    }, 0);\r\n  }, [cart, activeDeal, checkDealRequirements, getItemPrice]);\r\n\r\n  const cartItemsCount = useCallback(() => {\r\n    return cart.reduce((total, item) => total + item.quantity, 0);\r\n  }, [cart]);\r\n\r\n  const isItemInCart = useCallback(\r\n    (itemId, size = null) => {\r\n      const itemKey = getItemKey(itemId, size);\r\n      return cart.some((item) => getItemKey(item.id, item.size) === itemKey);\r\n    },\r\n    [cart, getItemKey]\r\n  );\r\n\r\n  const updateItemNote = useCallback(\r\n    (itemId, note, size = null) => {\r\n      setCart((currentCart) => {\r\n        const itemKey = getItemKey(itemId, size);\r\n        return currentCart.map((item) =>\r\n          getItemKey(item.id, item.size) === itemKey ? { ...item, note } : item\r\n        );\r\n      });\r\n    },\r\n    [getItemKey]\r\n  );\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      cart,\r\n      activeDeal,\r\n      addToCart,\r\n      removeFromCart,\r\n      updateQuantity,\r\n      clearCart,\r\n      cartTotal,\r\n      cartItemsCount,\r\n      isItemInCart,\r\n      updateItemNote,\r\n      startDeal,\r\n      cancelDeal,\r\n      checkDealRequirements,\r\n      getItemPrice,\r\n    }),\r\n    [\r\n      cart,\r\n      activeDeal,\r\n      addToCart,\r\n      removeFromCart,\r\n      updateQuantity,\r\n      clearCart,\r\n      cartTotal,\r\n      cartItemsCount,\r\n      isItemInCart,\r\n      updateItemNote,\r\n      startDeal,\r\n      cancelDeal,\r\n      checkDealRequirements,\r\n      getItemPrice,\r\n    ]\r\n  );\r\n\r\n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n}\r\n\r\nexport function useCart() {\r\n  const context = useContext(CartContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useCart must be used within a CartProvider\");\r\n  }\r\n  return context;\r\n}\r\n"],"mappings":";;;AAAA;;AAEA,OAAOA,KAAK,IACVC,aAAa,EACbC,UAAU,EACVC,QAAQ,EACRC,WAAW,EACXC,SAAS,EACTC,OAAO,QACF,OAAO;AACd,SAASC,wBAAwB,QAAQ,oBAAoB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE/D,MAAMC,WAAW,gBAAGT,aAAa,CAAC,CAAC;AAEnC,MAAMU,gBAAgB,GAAG,qBAAqB;AAC9C,MAAMC,iBAAiB,GAAG,sBAAsB;AAChD,MAAMC,YAAY,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;AAErC,OAAO,SAASC,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,MAAM;IACrC,IAAI;MACF,MAAMgB,SAAS,GAAGC,YAAY,CAACC,OAAO,CAACV,gBAAgB,CAAC;MACxD,OAAOQ,SAAS,GAAGG,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,GAAG,EAAE;IAC/C,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,OAAO,EAAE;IACX;EACF,CAAC,CAAC;EAEF,MAAM,CAACE,UAAU,EAAEC,aAAa,CAAC,GAAGxB,QAAQ,CAAC,MAAM;IACjD,IAAI;MACF,MAAMyB,SAAS,GAAGR,YAAY,CAACC,OAAO,CAACT,iBAAiB,CAAC;MACzD,IAAI,CAACgB,SAAS,EAAE,OAAO,IAAI;MAE3B,MAAMC,IAAI,GAAGP,IAAI,CAACC,KAAK,CAACK,SAAS,CAAC;MAClC,IACEC,IAAI,IACJA,IAAI,CAACC,gBAAgB,IACrB,CAACvB,wBAAwB,CAACsB,IAAI,CAACC,gBAAgB,CAAC,EAChD;QACAV,YAAY,CAACW,UAAU,CAACnB,iBAAiB,CAAC;QAC1C,OAAO,IAAI;MACb;MACA,OAAOiB,IAAI;IACb,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,OAAO,IAAI;IACb;EACF,CAAC,CAAC;EAEF,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAG9B,QAAQ,CAAC,MAAM;IACnD,MAAM+B,cAAc,GAAGd,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC;IAChE,OAAOa,cAAc,GAAGC,QAAQ,CAACD,cAAc,EAAE,EAAE,CAAC,GAAGE,IAAI,CAACC,GAAG,CAAC,CAAC;EACnE,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAGlC,WAAW,CAAC,MAAM;IAClCc,OAAO,CAAC,EAAE,CAAC;IACXS,aAAa,CAAC,IAAI,CAAC;IACnBP,YAAY,CAACW,UAAU,CAACpB,gBAAgB,CAAC;IACzCS,YAAY,CAACW,UAAU,CAACnB,iBAAiB,CAAC;IAC1CQ,YAAY,CAACW,UAAU,CAAC,mBAAmB,CAAC;IAC5CE,cAAc,CAACG,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAENhC,SAAS,CAAC,MAAM;IACd,IAAI;MACFe,YAAY,CAACmB,OAAO,CAAC5B,gBAAgB,EAAEW,IAAI,CAACkB,SAAS,CAACvB,IAAI,CAAC,CAAC;MAC5D,IAAIS,UAAU,EAAE;QACdN,YAAY,CAACmB,OAAO,CAAC3B,iBAAiB,EAAEU,IAAI,CAACkB,SAAS,CAACd,UAAU,CAAC,CAAC;MACrE,CAAC,MAAM;QACLN,YAAY,CAACW,UAAU,CAACnB,iBAAiB,CAAC;MAC5C;MACAqB,cAAc,CAACG,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;MAC1BjB,YAAY,CAACmB,OAAO,CAAC,mBAAmB,EAAEH,IAAI,CAACC,GAAG,CAAC,CAAC,CAACI,QAAQ,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC,OAAOjB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC7D;EACF,CAAC,EAAE,CAACP,IAAI,EAAES,UAAU,CAAC,CAAC;;EAEtB;EACArB,SAAS,CAAC,MAAM;IACd,MAAMqC,YAAY,GAAGA,CAAA,KAAM;MACzB,MAAML,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;MACtB,IAAIpB,IAAI,CAAC0B,MAAM,GAAG,CAAC,IAAIN,GAAG,GAAGL,WAAW,GAAGnB,YAAY,EAAE;QACvDY,OAAO,CAACmB,GAAG,CAAC,8BAA8B,CAAC;QAC3CN,SAAS,CAAC,CAAC;MACb;IACF,CAAC;IAED,MAAMO,eAAe,GAAGC,WAAW,CAACJ,YAAY,EAAE,KAAK,CAAC;IACxD,OAAO,MAAMK,aAAa,CAACF,eAAe,CAAC;EAC7C,CAAC,EAAE,CAACb,WAAW,EAAEf,IAAI,CAAC0B,MAAM,EAAEL,SAAS,CAAC,CAAC,CAAC,CAAC;;EAE3C,MAAMU,UAAU,GAAG5C,WAAW,CAC5B,CAAC6C,EAAE,EAAEC,IAAI,KAAK,GAAGD,EAAE,IAAIC,IAAI,IAAI,SAAS,EAAE,EAC1C,EACF,CAAC;EAED,MAAMC,YAAY,GAAG/C,WAAW,CAAEgD,IAAI,IAAK;IACzC,IAAI,CAACA,IAAI,EAAE,OAAO,CAAC;IACnB,IAAI,OAAOA,IAAI,CAACC,KAAK,KAAK,QAAQ,EAAE;MAClC,OACED,IAAI,CAACE,aAAa,IAClBF,IAAI,CAACC,KAAK,CAACD,IAAI,CAACF,IAAI,CAAC,IACrBK,MAAM,CAACC,MAAM,CAACJ,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IAEhC;IACA,OAAOD,IAAI,CAACC,KAAK;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMI,qBAAqB,GAAGrD,WAAW,CAAC,CAACyB,IAAI,EAAE6B,SAAS,KAAK;IAC7D,IAAI,CAAC7B,IAAI,IAAI,CAAC6B,SAAS,EAAE,OAAO,KAAK;IAErC,MAAMC,eAAe,GAAGD,SAAS,CAACE,MAAM,CAAC,CAACC,GAAG,EAAET,IAAI,KAAK;MACtD,IAAI,CAACS,GAAG,CAACT,IAAI,CAACU,QAAQ,CAAC,EAAE;QACvBD,GAAG,CAACT,IAAI,CAACU,QAAQ,CAAC,GAAG,EAAE;MACzB;MACAD,GAAG,CAACT,IAAI,CAACU,QAAQ,CAAC,CAACC,IAAI,CAACX,IAAI,CAAC;MAC7B,OAAOS,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CAAC;IAEN,OAAON,MAAM,CAACS,OAAO,CAACnC,IAAI,CAACoC,YAAY,CAAC,CAACC,KAAK,CAC5C,CAAC,CAACJ,QAAQ,EAAEK,WAAW,CAAC,KAAK;MAC3B,MAAMC,aAAa,GAAGT,eAAe,CAACG,QAAQ,CAAC,IAAI,EAAE;MACrD,MAAMO,UAAU,GAAGD,aAAa,CAACE,MAAM,CACpClB,IAAI,IAAKe,WAAW,CAACjB,IAAI,KAAK,KAAK,IAAIE,IAAI,CAACF,IAAI,KAAKiB,WAAW,CAACjB,IACpE,CAAC;MACD,MAAMqB,UAAU,GAAGF,UAAU,CAACT,MAAM,CAClC,CAACY,GAAG,EAAEpB,IAAI,KAAKoB,GAAG,GAAGpB,IAAI,CAACqB,QAAQ,EAClC,CACF,CAAC;MACD,OAAOF,UAAU,IAAIJ,WAAW,CAACO,KAAK;IACxC,CACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,SAAS,GAAGvE,WAAW,CAAEyB,IAAI,IAAK;IACtC,IAAI,CAACA,IAAI,EAAE;IACX,IACEA,IAAI,CAACC,gBAAgB,IACrB,CAACvB,wBAAwB,CAACsB,IAAI,CAACC,gBAAgB,CAAC,EAChD;MACAL,OAAO,CAACmB,GAAG,CAAC,oCAAoC,CAAC;MACjD;IACF;IACAjB,aAAa,CAAC;MAAE,GAAGE,IAAI;MAAE+C,SAAS,EAAE,IAAIxC,IAAI,CAAC,CAAC,CAACyC,WAAW,CAAC;IAAE,CAAC,CAAC;EACjE,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,UAAU,GAAG1E,WAAW,CAAC,MAAM;IACnCuB,aAAa,CAAC,IAAI,CAAC;IACnBP,YAAY,CAACW,UAAU,CAACnB,iBAAiB,CAAC;EAC5C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMmE,SAAS,GAAG3E,WAAW,CAC1BgD,IAAI,IAAK;IACR,IAAI,CAACA,IAAI,EAAE;IAEXlC,OAAO,CAAE8D,WAAW,IAAK;MACvB,MAAMC,OAAO,GAAGjC,UAAU,CAACI,IAAI,CAACH,EAAE,EAAEG,IAAI,CAACF,IAAI,CAAC;MAC9C,MAAMgC,iBAAiB,GAAGF,WAAW,CAACG,SAAS,CAC5CC,QAAQ,IAAKpC,UAAU,CAACoC,QAAQ,CAACnC,EAAE,EAAEmC,QAAQ,CAAClC,IAAI,CAAC,KAAK+B,OAC3D,CAAC;MAED,IAAII,WAAW;MACf,IAAIH,iBAAiB,KAAK,CAAC,CAAC,EAAE;QAC5BG,WAAW,GAAGL,WAAW,CAACM,GAAG,CAAC,CAACF,QAAQ,EAAEG,KAAK,KAC5CA,KAAK,KAAKL,iBAAiB,GACvB;UAAE,GAAGE,QAAQ;UAAEX,QAAQ,EAAEW,QAAQ,CAACX,QAAQ,GAAG;QAAE,CAAC,GAChDW,QACN,CAAC;MACH,CAAC,MAAM;QACLC,WAAW,GAAG,CACZ,GAAGL,WAAW,EACd;UACE,GAAG5B,IAAI;UACPqB,QAAQ,EAAE,CAAC;UACXe,UAAU,EAAEP,OAAO;UACnBQ,OAAO,EAAE,IAAIrD,IAAI,CAAC,CAAC,CAACyC,WAAW,CAAC;QAClC,CAAC,CACF;MACH;MAEA,OAAOQ,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC,EACD,CAACrC,UAAU,CACb,CAAC;EAED,MAAM0C,cAAc,GAAGtF,WAAW,CAChC,CAACuF,MAAM,EAAEzC,IAAI,GAAG,IAAI,KAAK;IACvBhC,OAAO,CAAE8D,WAAW,IAAK;MACvB,MAAMC,OAAO,GAAGjC,UAAU,CAAC2C,MAAM,EAAEzC,IAAI,CAAC;MACxC,MAAMmC,WAAW,GAAGL,WAAW,CAACV,MAAM,CACnClB,IAAI,IAAKJ,UAAU,CAACI,IAAI,CAACH,EAAE,EAAEG,IAAI,CAACF,IAAI,CAAC,KAAK+B,OAC/C,CAAC;MAED,IAAIvD,UAAU,IAAI,CAAC+B,qBAAqB,CAAC/B,UAAU,EAAE2D,WAAW,CAAC,EAAE;QACjEP,UAAU,CAAC,CAAC;MACd;MAEA,OAAOO,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC,EACD,CAACrC,UAAU,EAAEtB,UAAU,EAAE+B,qBAAqB,EAAEqB,UAAU,CAC5D,CAAC;EAED,MAAMc,cAAc,GAAGxF,WAAW,CAChC,CAACuF,MAAM,EAAEE,WAAW,EAAE3C,IAAI,GAAG,IAAI,KAAK;IACpC,IAAI2C,WAAW,GAAG,CAAC,EAAE;MACnBH,cAAc,CAACC,MAAM,EAAEzC,IAAI,CAAC;MAC5B;IACF;IAEAhC,OAAO,CAAE8D,WAAW,IAAK;MACvB,MAAMC,OAAO,GAAGjC,UAAU,CAAC2C,MAAM,EAAEzC,IAAI,CAAC;MACxC,MAAMmC,WAAW,GAAGL,WAAW,CAACM,GAAG,CAAElC,IAAI,IACvCJ,UAAU,CAACI,IAAI,CAACH,EAAE,EAAEG,IAAI,CAACF,IAAI,CAAC,KAAK+B,OAAO,GACtC;QAAE,GAAG7B,IAAI;QAAEqB,QAAQ,EAAEoB;MAAY,CAAC,GAClCzC,IACN,CAAC;MAED,IAAI1B,UAAU,IAAI,CAAC+B,qBAAqB,CAAC/B,UAAU,EAAE2D,WAAW,CAAC,EAAE;QACjEP,UAAU,CAAC,CAAC;MACd;MAEA,OAAOO,WAAW;IACpB,CAAC,CAAC;EACJ,CAAC,EACD,CAACrC,UAAU,EAAE0C,cAAc,EAAEhE,UAAU,EAAE+B,qBAAqB,EAAEqB,UAAU,CAC5E,CAAC;EAED,MAAMgB,SAAS,GAAG1F,WAAW,CAAC,MAAM;IAClC,IAAIsB,UAAU,IAAI+B,qBAAqB,CAAC/B,UAAU,EAAET,IAAI,CAAC,EAAE;MACzD,OAAOS,UAAU,CAAC2B,KAAK;IACzB;IAEA,OAAOpC,IAAI,CAAC2C,MAAM,CAAC,CAACmC,KAAK,EAAE3C,IAAI,KAAK;MAClC,MAAMC,KAAK,GAAGF,YAAY,CAACC,IAAI,CAAC;MAChC,OAAO2C,KAAK,GAAG1C,KAAK,GAAGD,IAAI,CAACqB,QAAQ;IACtC,CAAC,EAAE,CAAC,CAAC;EACP,CAAC,EAAE,CAACxD,IAAI,EAAES,UAAU,EAAE+B,qBAAqB,EAAEN,YAAY,CAAC,CAAC;EAE3D,MAAM6C,cAAc,GAAG5F,WAAW,CAAC,MAAM;IACvC,OAAOa,IAAI,CAAC2C,MAAM,CAAC,CAACmC,KAAK,EAAE3C,IAAI,KAAK2C,KAAK,GAAG3C,IAAI,CAACqB,QAAQ,EAAE,CAAC,CAAC;EAC/D,CAAC,EAAE,CAACxD,IAAI,CAAC,CAAC;EAEV,MAAMgF,YAAY,GAAG7F,WAAW,CAC9B,CAACuF,MAAM,EAAEzC,IAAI,GAAG,IAAI,KAAK;IACvB,MAAM+B,OAAO,GAAGjC,UAAU,CAAC2C,MAAM,EAAEzC,IAAI,CAAC;IACxC,OAAOjC,IAAI,CAACiF,IAAI,CAAE9C,IAAI,IAAKJ,UAAU,CAACI,IAAI,CAACH,EAAE,EAAEG,IAAI,CAACF,IAAI,CAAC,KAAK+B,OAAO,CAAC;EACxE,CAAC,EACD,CAAChE,IAAI,EAAE+B,UAAU,CACnB,CAAC;EAED,MAAMmD,cAAc,GAAG/F,WAAW,CAChC,CAACuF,MAAM,EAAES,IAAI,EAAElD,IAAI,GAAG,IAAI,KAAK;IAC7BhC,OAAO,CAAE8D,WAAW,IAAK;MACvB,MAAMC,OAAO,GAAGjC,UAAU,CAAC2C,MAAM,EAAEzC,IAAI,CAAC;MACxC,OAAO8B,WAAW,CAACM,GAAG,CAAElC,IAAI,IAC1BJ,UAAU,CAACI,IAAI,CAACH,EAAE,EAAEG,IAAI,CAACF,IAAI,CAAC,KAAK+B,OAAO,GAAG;QAAE,GAAG7B,IAAI;QAAEgD;MAAK,CAAC,GAAGhD,IACnE,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,EACD,CAACJ,UAAU,CACb,CAAC;EAED,MAAMqD,KAAK,GAAG/F,OAAO,CACnB,OAAO;IACLW,IAAI;IACJS,UAAU;IACVqD,SAAS;IACTW,cAAc;IACdE,cAAc;IACdtD,SAAS;IACTwD,SAAS;IACTE,cAAc;IACdC,YAAY;IACZE,cAAc;IACdxB,SAAS;IACTG,UAAU;IACVrB,qBAAqB;IACrBN;EACF,CAAC,CAAC,EACF,CACElC,IAAI,EACJS,UAAU,EACVqD,SAAS,EACTW,cAAc,EACdE,cAAc,EACdtD,SAAS,EACTwD,SAAS,EACTE,cAAc,EACdC,YAAY,EACZE,cAAc,EACdxB,SAAS,EACTG,UAAU,EACVrB,qBAAqB,EACrBN,YAAY,CAEhB,CAAC;EAED,oBAAO1C,OAAA,CAACC,WAAW,CAAC4F,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAtF,QAAA,EAAEA;EAAQ;IAAAwF,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E;AAAC1F,EAAA,CA5ReF,YAAY;AAAA6F,EAAA,GAAZ7F,YAAY;AA8R5B,OAAO,SAAS8F,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACxB,MAAMC,OAAO,GAAG5G,UAAU,CAACQ,WAAW,CAAC;EACvC,IAAIoG,OAAO,KAAKC,SAAS,EAAE;IACzB,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACA,OAAOF,OAAO;AAChB;AAACD,GAAA,CANeD,OAAO;AAAA,IAAAD,EAAA;AAAAM,YAAA,CAAAN,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}