{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rui Seca\\\\savannah-bites\\\\frontend\\\\src\\\\components\\\\CheckoutPage\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../../context/CartContext\";\nimport ProgressSteps from \"../ProgressSteps/index.jsx\";\nimport \"./styles.css\";\n\n// Import images\nimport suyaSkewersImage from \"../../images/suya-skewers.png\";\nimport jollofRiceImage from \"../../images/jollof-rice.jpg\";\nimport malvaPuddingImage from \"../../images/malva-pudding.png\";\nimport moiMoiImage from \"../../images/moi-moi.jpg\";\nimport puffPuffImage from \"../../images/puff-puff.jpg\";\nimport egusiSoupImage from \"../../images/egusi-soup.jpg\";\nimport jamaicanPattiesImage from \"../../images/jamaican-patties.jpg\";\nimport caluluImage from \"../../images/calulu.jpg\";\nimport cachupaImage from \"../../images/cachupa.jpg\";\nimport chinChinImage from \"../../images/chin-chin.jpg\";\nimport bananaFlambeImage from \"../../images/banana-flambe.jpg\";\nimport randburgSunImage from \"../../images/randburg-sun.jpg\"; // Added for Randburg Sun\nimport waterImage from \"../../images/water.jpg\";\nimport cokeImage from \"../../images/coca-cola.jpg\";\nimport iceTeaImage from \"../../images/ice-tea.jpg\";\nimport compalImage from \"../../images/compal.jpg\"; // Added for Compal\nimport strawberryShakeImage from \"../../images/strawberry-milkshake.jpg\";\nimport chocolateShakeImage from \"../../images/chocolate-milkshake.jpg\";\nimport vanillaShakeImage from \"../../images/vanilla-milkshake.jpg\";\nimport oreoShakeImage from \"../../images/oreo-milkshake.jpg\"; // Added for Oreo Milkshake\nimport summersBeerImage from \"../../images/apple-somersby.jpg\";\nimport superBockImage from \"../../images/super-bock.jpg\";\nimport stellaImage from \"../../images/stella-artois.jpg\";\nimport cucaImage from \"../../images/cuca.jpg\"; // Added for Cuca\n\n// Image mapping\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst images = {\n  \"suya-skewers.png\": suyaSkewersImage,\n  \"jollof-rice.jpg\": jollofRiceImage,\n  \"malva-pudding.png\": malvaPuddingImage,\n  \"moi-moi.jpg\": moiMoiImage,\n  \"puff-puff.jpg\": puffPuffImage,\n  \"jamaican-patties.jpg\": jamaicanPattiesImage,\n  \"egusi-soup.jpg\": egusiSoupImage,\n  \"calulu.jpg\": caluluImage,\n  \"cachupa.jpg\": cachupaImage,\n  \"chin-chin.jpg\": chinChinImage,\n  \"banana-flambe.jpg\": bananaFlambeImage,\n  \"randburg-sun.jpg\": randburgSunImage,\n  \"water.jpg\": waterImage,\n  \"coca-cola.jpg\": cokeImage,\n  \"ice-tea.jpg\": iceTeaImage,\n  \"compal.jpg\": compalImage,\n  \"strawberry-milkshake.jpg\": strawberryShakeImage,\n  \"chocolate-milkshake.jpg\": chocolateShakeImage,\n  \"vanilla-milkshake.jpg\": vanillaShakeImage,\n  \"oreo-milkshake.jpg\": oreoShakeImage,\n  \"apple-somersby.jpg\": summersBeerImage,\n  \"super-bock.jpg\": superBockImage,\n  \"stella-artois.jpg\": stellaImage,\n  \"cuca.jpg\": cucaImage\n};\nconst getImage = filename => images[filename] || \"https://via.placeholder.com/150\";\nconst DELIVERY_FEE = 2.5;\nconst MINIMUM_ORDER_AMOUNT = 10.0;\nconst MAX_ITEMS_PER_ORDER = 20;\nconst DELIVERY_SLOTS = [{\n  display: \"10:00 AM - 12:00 PM\",\n  value: \"10:00\"\n}, {\n  display: \"12:00 PM - 2:00 PM\",\n  value: \"12:00\"\n}, {\n  display: \"2:00 PM - 4:00 PM\",\n  value: \"14:00\"\n}, {\n  display: \"4:00 PM - 6:00 PM\",\n  value: \"16:00\"\n}, {\n  display: \"6:00 PM - 8:00 PM\",\n  value: \"18:00\"\n}];\nconst initialFormData = {\n  name: \"\",\n  email: \"\",\n  phone: \"\",\n  street: \"\",\n  city: \"\",\n  postcode: \"\",\n  deliveryTime: \"\",\n  specialInstructions: \"\"\n};\nconst validateUKPostcode = postcode => {\n  const postcodeRegex = /^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i;\n  return postcodeRegex.test(postcode.trim());\n};\nconst validateEmail = email => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\nconst validatePhone = phone => {\n  const phoneRegex = /^[\\d\\s]{11,14}$/;\n  return phoneRegex.test(phone);\n};\nfunction CheckoutPage() {\n  _s();\n  const {\n    cart,\n    removeFromCart,\n    updateQuantity\n  } = useCart();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState(initialFormData);\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Validation function for delivery time\n  const validateDeliveryTime = useCallback(deliveryTime => {\n    if (!deliveryTime) {\n      return \"Please select a delivery time\";\n    }\n    const [hours, minutes] = deliveryTime.split(\":\").map(Number);\n    const deliveryDateTime = new Date();\n    deliveryDateTime.setHours(hours, minutes, 0, 0);\n    if (deliveryDateTime <= new Date()) {\n      return \"Please select a future delivery time\";\n    }\n    return null;\n  }, []);\n\n  // Format phone number as user types\n  const formatPhoneNumber = useCallback(value => {\n    const phoneNumber = value.replace(/\\D/g, \"\");\n    if (phoneNumber.length <= 3) return phoneNumber;\n    if (phoneNumber.length <= 7) return `${phoneNumber.slice(0, 3)} ${phoneNumber.slice(3)}`;\n    return `${phoneNumber.slice(0, 3)} ${phoneNumber.slice(3, 7)} ${phoneNumber.slice(7, 11)}`;\n  }, []);\n\n  // Handle all input changes\n  const handleInputChange = useCallback(e => {\n    const {\n      id,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [id]: id === \"phone\" ? formatPhoneNumber(value) : value\n    }));\n\n    // Clear errors for the changed field\n    setErrors(prev => ({\n      ...prev,\n      [id]: \"\",\n      general: \"\"\n    }));\n  }, [formatPhoneNumber]);\n\n  // Calculate cart totals\n  const {\n    subtotal,\n    totalPrice\n  } = useMemo(() => {\n    const subtotal = cart.reduce((total, item) => {\n      const price = item.selectedPrice || item.price;\n      return total + price * item.quantity;\n    }, 0);\n    return {\n      subtotal,\n      totalPrice: subtotal + DELIVERY_FEE\n    };\n  }, [cart]);\n\n  // Validate form data\n  const validateForm = useCallback(() => {\n    const newErrors = {};\n\n    // Name validation\n    if (!formData.name.trim()) {\n      newErrors.name = \"Name is required\";\n    }\n\n    // Email validation\n    if (!formData.email) {\n      newErrors.email = \"Email is required\";\n    } else if (!validateEmail(formData.email)) {\n      newErrors.email = \"Please enter a valid email address\";\n    }\n\n    // Phone validation\n    if (!formData.phone) {\n      newErrors.phone = \"Phone number is required\";\n    } else if (!validatePhone(formData.phone)) {\n      newErrors.phone = \"Please enter a valid UK phone number\";\n    }\n\n    // Address validation\n    if (!formData.street.trim()) {\n      newErrors.street = \"Street address is required\";\n    }\n    if (!formData.city.trim()) {\n      newErrors.city = \"City is required\";\n    }\n    if (!formData.postcode.trim()) {\n      newErrors.postcode = \"Postcode is required\";\n    } else if (!validateUKPostcode(formData.postcode)) {\n      newErrors.postcode = \"Please enter a valid UK postcode\";\n    }\n\n    // Delivery time validation\n    const deliveryTimeError = validateDeliveryTime(formData.deliveryTime);\n    if (deliveryTimeError) {\n      newErrors.deliveryTime = deliveryTimeError;\n    }\n\n    // Order amount validation\n    if (subtotal < MINIMUM_ORDER_AMOUNT) {\n      newErrors.general = `Minimum order amount is Â£${MINIMUM_ORDER_AMOUNT.toFixed(2)}`;\n    }\n    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);\n    if (totalItems > MAX_ITEMS_PER_ORDER) {\n      newErrors.general = `Maximum ${MAX_ITEMS_PER_ORDER} items allowed per order`;\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [formData, subtotal, cart, validateDeliveryTime]);\n\n  // Quantity handlers\n  const handleQuantityChange = useCallback((itemId, newQuantity, size) => {\n    if (newQuantity >= 1) {\n      updateQuantity(itemId, newQuantity, size);\n    }\n  }, [updateQuantity]);\n\n  // Handle form submission\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    if (cart.length === 0) {\n      setErrors({\n        general: \"Your cart is empty\"\n      });\n      return;\n    }\n    try {\n      setIsSubmitting(true);\n\n      // Calculate totals here to ensure consistency\n      const subtotal = cart.reduce((total, item) => {\n        const price = Number(item.selectedPrice || item.price);\n        return total + price * item.quantity;\n      }, 0);\n      const totalAmount = subtotal + DELIVERY_FEE;\n      const amountInCents = Math.round(totalAmount * 100);\n\n      // Find the delivery slot display value\n      const selectedSlot = DELIVERY_SLOTS.find(slot => slot.value === formData.deliveryTime);\n      navigate(\"/payment\", {\n        state: {\n          orderDetails: {\n            items: cart.map(item => ({\n              id: item.id,\n              name: item.name,\n              quantity: parseInt(item.quantity, 10),\n              price: Number(item.selectedPrice || item.price),\n              size: item.size || \"regular\"\n            })),\n            customerInfo: {\n              name: formData.name.trim(),\n              email: formData.email.toLowerCase().trim(),\n              phone: formData.phone,\n              address: formData.street.trim(),\n              city: formData.city.trim(),\n              postcode: formData.postcode.toUpperCase().trim(),\n              deliveryTime: formData.deliveryTime,\n              // This will now be in 24-hour format\n              specialInstructions: formData.specialInstructions.trim()\n            },\n            subtotal: Number(subtotal.toFixed(2)),\n            deliveryFee: DELIVERY_FEE,\n            totalAmount: amountInCents,\n            orderDate: new Date().toISOString(),\n            selectedTimeSlot: (selectedSlot === null || selectedSlot === void 0 ? void 0 : selectedSlot.display) || \"\" // Store display value if needed\n          }\n        }\n      });\n    } catch (error) {\n      console.error(\"Checkout error:\", error);\n      setErrors({\n        general: \"There was an error processing your order. Please try again.\"\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [cart, formData, navigate, validateForm]);\n\n  // Empty cart view\n  if (cart.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title\",\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-cart\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your cart is empty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: () => navigate(\"/menu\"),\n            children: \"Return to Menu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Main checkout view\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"checkout-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout-container\",\n      children: [/*#__PURE__*/_jsxDEV(ProgressSteps, {\n        currentStep: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: () => navigate(-1),\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"cart-items\",\n          children: cart.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"cart-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImage(item.image),\n                alt: item.name,\n                className: \"checkout-item-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"item-name\",\n                children: [item.name, item.size && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"item-size\",\n                  children: [\"(\", item.size, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"item-price\",\n                children: [\"\\xA3\", (item.selectedPrice || item.price).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleQuantityChange(item.id, item.quantity - 1, item.size),\n                className: \"quantity-btn\",\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => handleQuantityChange(item.id, item.quantity + 1, item.size),\n                className: \"quantity-btn\",\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => removeFromCart(item.id, item.size),\n              className: \"remove-btn\",\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)]\n          }, `${item.id}-${item.size || \"default\"}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\xA3\", subtotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Delivery Fee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\xA3\", DELIVERY_FEE.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-row total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\xA3\", totalPrice.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"delivery-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Delivery Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Contact Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                children: \"Full Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"name\",\n                value: formData.name,\n                onChange: handleInputChange,\n                placeholder: \"Enter your full name\",\n                className: errors.name ? \"error\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this), errors.name && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Email Address *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                id: \"email\",\n                value: formData.email,\n                onChange: handleInputChange,\n                placeholder: \"Enter your email\",\n                className: errors.email ? \"error\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 17\n              }, this), errors.email && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"phone\",\n                children: \"Phone Number *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                id: \"phone\",\n                value: formData.phone,\n                onChange: handleInputChange,\n                placeholder: \"Enter your phone number\",\n                className: errors.phone ? \"error\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 17\n              }, this), errors.phone && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Delivery Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"street\",\n              children: \"Street Address *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"street\",\n              value: formData.street,\n              onChange: handleInputChange,\n              placeholder: \"Enter your street address\",\n              rows: \"2\",\n              className: errors.street ? \"error\" : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), errors.street && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.street\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"address-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"city\",\n                children: \"City *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"city\",\n                value: formData.city,\n                onChange: handleInputChange,\n                placeholder: \"Enter city\",\n                className: errors.city ? \"error\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this), errors.city && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.city\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"postcode\",\n                children: \"Postcode *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"postcode\",\n                value: formData.postcode,\n                onChange: handleInputChange,\n                placeholder: \"Enter postcode\",\n                className: errors.postcode ? \"error\" : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 17\n              }, this), errors.postcode && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"error-text\",\n                children: errors.postcode\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"summary-title\",\n            children: \"Delivery Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"deliveryTime\",\n              children: \"Preferred Delivery Time *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"deliveryTime\",\n              value: formData.deliveryTime,\n              onChange: handleInputChange,\n              className: errors.deliveryTime ? \"error\" : \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select delivery time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }, this), DELIVERY_SLOTS.map(slot => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: slot.value,\n                children: slot.display\n              }, slot.display, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this), errors.deliveryTime && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-message\",\n              children: errors.deliveryTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"specialInstructions\",\n              children: \"Special Instructions (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"specialInstructions\",\n              value: formData.specialInstructions,\n              onChange: handleInputChange,\n              placeholder: \"Add any special delivery instructions...\",\n              rows: \"3\",\n              className: \"special-instructions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-summary\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Subtotal:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\xA3\", subtotal.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Delivery Fee:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\xA3\", DELIVERY_FEE.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price-row total\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total Amount:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\xA3\", totalPrice.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-notice\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"* Minimum order: \\xA3\", MINIMUM_ORDER_AMOUNT.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"* Maximum \", MAX_ITEMS_PER_ORDER, \" items per order\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 13\n          }, this), errors.general && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message general\",\n            children: errors.general\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-button\",\n            disabled: isSubmitting,\n            children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Processing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Proceed to Payment \\u2022 \\xA3\", totalPrice.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"terms-section\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"By proceeding, you agree to our\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/terms\",\n              className: \"link\",\n              children: \"Terms & Conditions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 15\n            }, this), \" \", \"and\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/privacy\",\n              className: \"link\",\n              children: \"Privacy Policy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutPage, \"TD1lQY0G+mJy2oq98Fu/GasvNY0=\", false, function () {\n  return [useCart, useNavigate];\n});\n_c = CheckoutPage;\nexport default CheckoutPage;\nvar _c;\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","useNavigate","useCart","ProgressSteps","suyaSkewersImage","jollofRiceImage","malvaPuddingImage","moiMoiImage","puffPuffImage","egusiSoupImage","jamaicanPattiesImage","caluluImage","cachupaImage","chinChinImage","bananaFlambeImage","randburgSunImage","waterImage","cokeImage","iceTeaImage","compalImage","strawberryShakeImage","chocolateShakeImage","vanillaShakeImage","oreoShakeImage","summersBeerImage","superBockImage","stellaImage","cucaImage","jsxDEV","_jsxDEV","images","getImage","filename","DELIVERY_FEE","MINIMUM_ORDER_AMOUNT","MAX_ITEMS_PER_ORDER","DELIVERY_SLOTS","display","value","initialFormData","name","email","phone","street","city","postcode","deliveryTime","specialInstructions","validateUKPostcode","postcodeRegex","test","trim","validateEmail","emailRegex","validatePhone","phoneRegex","CheckoutPage","_s","cart","removeFromCart","updateQuantity","navigate","formData","setFormData","errors","setErrors","isSubmitting","setIsSubmitting","validateDeliveryTime","hours","minutes","split","map","Number","deliveryDateTime","Date","setHours","formatPhoneNumber","phoneNumber","replace","length","slice","handleInputChange","e","id","target","prev","general","subtotal","totalPrice","reduce","total","item","price","selectedPrice","quantity","validateForm","newErrors","deliveryTimeError","toFixed","totalItems","sum","Object","keys","handleQuantityChange","itemId","newQuantity","size","handleSubmit","preventDefault","totalAmount","amountInCents","Math","round","selectedSlot","find","slot","state","orderDetails","items","parseInt","customerInfo","toLowerCase","address","toUpperCase","deliveryFee","orderDate","toISOString","selectedTimeSlot","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","currentStep","src","image","alt","type","onSubmit","htmlFor","onChange","placeholder","rows","disabled","href","_c","$RefreshReg$"],"sources":["C:/Users/Rui Seca/savannah-bites/frontend/src/components/CheckoutPage/index.jsx"],"sourcesContent":["import React, { useState, useCallback, useMemo } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCart } from \"../../context/CartContext\";\r\nimport ProgressSteps from \"../ProgressSteps/index.jsx\";\r\nimport \"./styles.css\";\r\n\r\n// Import images\r\nimport suyaSkewersImage from \"../../images/suya-skewers.png\";\r\nimport jollofRiceImage from \"../../images/jollof-rice.jpg\";\r\nimport malvaPuddingImage from \"../../images/malva-pudding.png\";\r\nimport moiMoiImage from \"../../images/moi-moi.jpg\";\r\nimport puffPuffImage from \"../../images/puff-puff.jpg\";\r\nimport egusiSoupImage from \"../../images/egusi-soup.jpg\";\r\nimport jamaicanPattiesImage from \"../../images/jamaican-patties.jpg\";\r\nimport caluluImage from \"../../images/calulu.jpg\";\r\nimport cachupaImage from \"../../images/cachupa.jpg\";\r\nimport chinChinImage from \"../../images/chin-chin.jpg\";\r\nimport bananaFlambeImage from \"../../images/banana-flambe.jpg\";\r\nimport randburgSunImage from \"../../images/randburg-sun.jpg\"; // Added for Randburg Sun\r\nimport waterImage from \"../../images/water.jpg\";\r\nimport cokeImage from \"../../images/coca-cola.jpg\";\r\nimport iceTeaImage from \"../../images/ice-tea.jpg\";\r\nimport compalImage from \"../../images/compal.jpg\"; // Added for Compal\r\nimport strawberryShakeImage from \"../../images/strawberry-milkshake.jpg\";\r\nimport chocolateShakeImage from \"../../images/chocolate-milkshake.jpg\";\r\nimport vanillaShakeImage from \"../../images/vanilla-milkshake.jpg\";\r\nimport oreoShakeImage from \"../../images/oreo-milkshake.jpg\"; // Added for Oreo Milkshake\r\nimport summersBeerImage from \"../../images/apple-somersby.jpg\";\r\nimport superBockImage from \"../../images/super-bock.jpg\";\r\nimport stellaImage from \"../../images/stella-artois.jpg\";\r\nimport cucaImage from \"../../images/cuca.jpg\"; // Added for Cuca\r\n\r\n// Image mapping\r\nconst images = {\r\n  \"suya-skewers.png\": suyaSkewersImage,\r\n  \"jollof-rice.jpg\": jollofRiceImage,\r\n  \"malva-pudding.png\": malvaPuddingImage,\r\n  \"moi-moi.jpg\": moiMoiImage,\r\n  \"puff-puff.jpg\": puffPuffImage,\r\n  \"jamaican-patties.jpg\": jamaicanPattiesImage,\r\n  \"egusi-soup.jpg\": egusiSoupImage,\r\n  \"calulu.jpg\": caluluImage,\r\n  \"cachupa.jpg\": cachupaImage,\r\n  \"chin-chin.jpg\": chinChinImage,\r\n  \"banana-flambe.jpg\": bananaFlambeImage,\r\n  \"randburg-sun.jpg\": randburgSunImage,\r\n  \"water.jpg\": waterImage,\r\n  \"coca-cola.jpg\": cokeImage,\r\n  \"ice-tea.jpg\": iceTeaImage,\r\n  \"compal.jpg\": compalImage,\r\n  \"strawberry-milkshake.jpg\": strawberryShakeImage,\r\n  \"chocolate-milkshake.jpg\": chocolateShakeImage,\r\n  \"vanilla-milkshake.jpg\": vanillaShakeImage,\r\n  \"oreo-milkshake.jpg\": oreoShakeImage,\r\n  \"apple-somersby.jpg\": summersBeerImage,\r\n  \"super-bock.jpg\": superBockImage,\r\n  \"stella-artois.jpg\": stellaImage,\r\n  \"cuca.jpg\": cucaImage,\r\n};\r\n\r\nconst getImage = (filename) =>\r\n  images[filename] || \"https://via.placeholder.com/150\";\r\n\r\nconst DELIVERY_FEE = 2.5;\r\nconst MINIMUM_ORDER_AMOUNT = 10.0;\r\nconst MAX_ITEMS_PER_ORDER = 20;\r\n\r\nconst DELIVERY_SLOTS = [\r\n  { display: \"10:00 AM - 12:00 PM\", value: \"10:00\" },\r\n  { display: \"12:00 PM - 2:00 PM\", value: \"12:00\" },\r\n  { display: \"2:00 PM - 4:00 PM\", value: \"14:00\" },\r\n  { display: \"4:00 PM - 6:00 PM\", value: \"16:00\" },\r\n  { display: \"6:00 PM - 8:00 PM\", value: \"18:00\" },\r\n];\r\n\r\nconst initialFormData = {\r\n  name: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  street: \"\",\r\n  city: \"\",\r\n  postcode: \"\",\r\n  deliveryTime: \"\",\r\n  specialInstructions: \"\",\r\n};\r\n\r\nconst validateUKPostcode = (postcode) => {\r\n  const postcodeRegex = /^[A-Z]{1,2}[0-9][A-Z0-9]? ?[0-9][A-Z]{2}$/i;\r\n  return postcodeRegex.test(postcode.trim());\r\n};\r\n\r\nconst validateEmail = (email) => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n};\r\n\r\nconst validatePhone = (phone) => {\r\n  const phoneRegex = /^[\\d\\s]{11,14}$/;\r\n  return phoneRegex.test(phone);\r\n};\r\n\r\nfunction CheckoutPage() {\r\n  const { cart, removeFromCart, updateQuantity } = useCart();\r\n  const navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState(initialFormData);\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Validation function for delivery time\r\n  const validateDeliveryTime = useCallback((deliveryTime) => {\r\n    if (!deliveryTime) {\r\n      return \"Please select a delivery time\";\r\n    }\r\n\r\n    const [hours, minutes] = deliveryTime.split(\":\").map(Number);\r\n    const deliveryDateTime = new Date();\r\n    deliveryDateTime.setHours(hours, minutes, 0, 0);\r\n\r\n    if (deliveryDateTime <= new Date()) {\r\n      return \"Please select a future delivery time\";\r\n    }\r\n\r\n    return null;\r\n  }, []);\r\n\r\n  // Format phone number as user types\r\n  const formatPhoneNumber = useCallback((value) => {\r\n    const phoneNumber = value.replace(/\\D/g, \"\");\r\n    if (phoneNumber.length <= 3) return phoneNumber;\r\n    if (phoneNumber.length <= 7)\r\n      return `${phoneNumber.slice(0, 3)} ${phoneNumber.slice(3)}`;\r\n    return `${phoneNumber.slice(0, 3)} ${phoneNumber.slice(3, 7)} ${phoneNumber.slice(7, 11)}`;\r\n  }, []);\r\n\r\n  // Handle all input changes\r\n  const handleInputChange = useCallback(\r\n    (e) => {\r\n      const { id, value } = e.target;\r\n\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        [id]: id === \"phone\" ? formatPhoneNumber(value) : value,\r\n      }));\r\n\r\n      // Clear errors for the changed field\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        [id]: \"\",\r\n        general: \"\",\r\n      }));\r\n    },\r\n    [formatPhoneNumber]\r\n  );\r\n\r\n  // Calculate cart totals\r\n  const { subtotal, totalPrice } = useMemo(() => {\r\n    const subtotal = cart.reduce((total, item) => {\r\n      const price = item.selectedPrice || item.price;\r\n      return total + price * item.quantity;\r\n    }, 0);\r\n\r\n    return {\r\n      subtotal,\r\n      totalPrice: subtotal + DELIVERY_FEE,\r\n    };\r\n  }, [cart]);\r\n\r\n  // Validate form data\r\n  const validateForm = useCallback(() => {\r\n    const newErrors = {};\r\n\r\n    // Name validation\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = \"Name is required\";\r\n    }\r\n\r\n    // Email validation\r\n    if (!formData.email) {\r\n      newErrors.email = \"Email is required\";\r\n    } else if (!validateEmail(formData.email)) {\r\n      newErrors.email = \"Please enter a valid email address\";\r\n    }\r\n\r\n    // Phone validation\r\n    if (!formData.phone) {\r\n      newErrors.phone = \"Phone number is required\";\r\n    } else if (!validatePhone(formData.phone)) {\r\n      newErrors.phone = \"Please enter a valid UK phone number\";\r\n    }\r\n\r\n    // Address validation\r\n    if (!formData.street.trim()) {\r\n      newErrors.street = \"Street address is required\";\r\n    }\r\n\r\n    if (!formData.city.trim()) {\r\n      newErrors.city = \"City is required\";\r\n    }\r\n\r\n    if (!formData.postcode.trim()) {\r\n      newErrors.postcode = \"Postcode is required\";\r\n    } else if (!validateUKPostcode(formData.postcode)) {\r\n      newErrors.postcode = \"Please enter a valid UK postcode\";\r\n    }\r\n\r\n    // Delivery time validation\r\n    const deliveryTimeError = validateDeliveryTime(formData.deliveryTime);\r\n    if (deliveryTimeError) {\r\n      newErrors.deliveryTime = deliveryTimeError;\r\n    }\r\n\r\n    // Order amount validation\r\n    if (subtotal < MINIMUM_ORDER_AMOUNT) {\r\n      newErrors.general = `Minimum order amount is Â£${MINIMUM_ORDER_AMOUNT.toFixed(2)}`;\r\n    }\r\n\r\n    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n    if (totalItems > MAX_ITEMS_PER_ORDER) {\r\n      newErrors.general = `Maximum ${MAX_ITEMS_PER_ORDER} items allowed per order`;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  }, [formData, subtotal, cart, validateDeliveryTime]);\r\n\r\n  // Quantity handlers\r\n  const handleQuantityChange = useCallback(\r\n    (itemId, newQuantity, size) => {\r\n      if (newQuantity >= 1) {\r\n        updateQuantity(itemId, newQuantity, size);\r\n      }\r\n    },\r\n    [updateQuantity]\r\n  );\r\n\r\n  // Handle form submission\r\n  const handleSubmit = useCallback(\r\n    async (e) => {\r\n      e.preventDefault();\r\n\r\n      if (!validateForm()) {\r\n        return;\r\n      }\r\n\r\n      if (cart.length === 0) {\r\n        setErrors({ general: \"Your cart is empty\" });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setIsSubmitting(true);\r\n\r\n        // Calculate totals here to ensure consistency\r\n        const subtotal = cart.reduce((total, item) => {\r\n          const price = Number(item.selectedPrice || item.price);\r\n          return total + price * item.quantity;\r\n        }, 0);\r\n\r\n        const totalAmount = subtotal + DELIVERY_FEE;\r\n        const amountInCents = Math.round(totalAmount * 100);\r\n\r\n        // Find the delivery slot display value\r\n        const selectedSlot = DELIVERY_SLOTS.find(\r\n          (slot) => slot.value === formData.deliveryTime\r\n        );\r\n\r\n        navigate(\"/payment\", {\r\n          state: {\r\n            orderDetails: {\r\n              items: cart.map((item) => ({\r\n                id: item.id,\r\n                name: item.name,\r\n                quantity: parseInt(item.quantity, 10),\r\n                price: Number(item.selectedPrice || item.price),\r\n                size: item.size || \"regular\",\r\n              })),\r\n              customerInfo: {\r\n                name: formData.name.trim(),\r\n                email: formData.email.toLowerCase().trim(),\r\n                phone: formData.phone,\r\n                address: formData.street.trim(),\r\n                city: formData.city.trim(),\r\n                postcode: formData.postcode.toUpperCase().trim(),\r\n                deliveryTime: formData.deliveryTime, // This will now be in 24-hour format\r\n                specialInstructions: formData.specialInstructions.trim(),\r\n              },\r\n              subtotal: Number(subtotal.toFixed(2)),\r\n              deliveryFee: DELIVERY_FEE,\r\n              totalAmount: amountInCents,\r\n              orderDate: new Date().toISOString(),\r\n              selectedTimeSlot: selectedSlot?.display || \"\", // Store display value if needed\r\n            },\r\n          },\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Checkout error:\", error);\r\n        setErrors({\r\n          general:\r\n            \"There was an error processing your order. Please try again.\",\r\n        });\r\n      } finally {\r\n        setIsSubmitting(false);\r\n      }\r\n    },\r\n    [cart, formData, navigate, validateForm]\r\n  );\r\n\r\n  // Empty cart view\r\n  if (cart.length === 0) {\r\n    return (\r\n      <div className=\"checkout-page\">\r\n        <div className=\"checkout-container\">\r\n          <h1 className=\"page-title\">Checkout</h1>\r\n          <div className=\"empty-cart\">\r\n            <p>Your cart is empty</p>\r\n            <button\r\n              className=\"primary-button\"\r\n              onClick={() => navigate(\"/menu\")}\r\n            >\r\n              Return to Menu\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Main checkout view\r\n  return (\r\n    <div className=\"checkout-page\">\r\n      <div className=\"checkout-container\">\r\n        <ProgressSteps currentStep={1} />\r\n\r\n        {/* Header */}\r\n        <div className=\"checkout-header\">\r\n          <button className=\"back-button\" onClick={() => navigate(-1)}>\r\n            â Back\r\n          </button>\r\n          <h1>Checkout</h1>\r\n        </div>\r\n\r\n        {/* Order Summary */}\r\n        <div className=\"order-summary\">\r\n          <h2>Order Summary</h2>\r\n          <ul className=\"cart-items\">\r\n            {cart.map((item) => (\r\n              <li\r\n                key={`${item.id}-${item.size || \"default\"}`}\r\n                className=\"cart-item\"\r\n              >\r\n                <div className=\"item-info\">\r\n                  <img\r\n                    src={getImage(item.image)}\r\n                    alt={item.name}\r\n                    className=\"checkout-item-image\"\r\n                  />\r\n                  <span className=\"item-name\">\r\n                    {item.name}\r\n                    {item.size && (\r\n                      <span className=\"item-size\">({item.size})</span>\r\n                    )}\r\n                  </span>\r\n                  <span className=\"item-price\">\r\n                    Â£{(item.selectedPrice || item.price).toFixed(2)}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"quantity-controls\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() =>\r\n                      handleQuantityChange(\r\n                        item.id,\r\n                        item.quantity - 1,\r\n                        item.size\r\n                      )\r\n                    }\r\n                    className=\"quantity-btn\"\r\n                  >\r\n                    -\r\n                  </button>\r\n                  <span>{item.quantity}</span>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() =>\r\n                      handleQuantityChange(\r\n                        item.id,\r\n                        item.quantity + 1,\r\n                        item.size\r\n                      )\r\n                    }\r\n                    className=\"quantity-btn\"\r\n                  >\r\n                    +\r\n                  </button>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => removeFromCart(item.id, item.size)}\r\n                  className=\"remove-btn\"\r\n                >\r\n                  Remove\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n\r\n          <div className=\"price-summary\">\r\n            <div className=\"price-row\">\r\n              <span>Subtotal</span>\r\n              <span>Â£{subtotal.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"price-row\">\r\n              <span>Delivery Fee</span>\r\n              <span>Â£{DELIVERY_FEE.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"price-row total\">\r\n              <span>Total</span>\r\n              <span>Â£{totalPrice.toFixed(2)}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Delivery Details Form */}\r\n        <form onSubmit={handleSubmit} className=\"delivery-form\">\r\n          <h2>Delivery Details</h2>\r\n\r\n          <div className=\"form-section\">\r\n            <h3>Contact Information</h3>\r\n            <div className=\"form-grid\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\">Full Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  value={formData.name}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Enter your full name\"\r\n                  className={errors.name ? \"error\" : \"\"}\r\n                />\r\n                {errors.name && (\r\n                  <span className=\"error-text\">{errors.name}</span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">Email Address *</label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  value={formData.email}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Enter your email\"\r\n                  className={errors.email ? \"error\" : \"\"}\r\n                />\r\n                {errors.email && (\r\n                  <span className=\"error-text\">{errors.email}</span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"phone\">Phone Number *</label>\r\n                <input\r\n                  type=\"tel\"\r\n                  id=\"phone\"\r\n                  value={formData.phone}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Enter your phone number\"\r\n                  className={errors.phone ? \"error\" : \"\"}\r\n                />\r\n                {errors.phone && (\r\n                  <span className=\"error-text\">{errors.phone}</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-section\">\r\n            <h3>Delivery Address</h3>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"street\">Street Address *</label>\r\n              <textarea\r\n                id=\"street\"\r\n                value={formData.street}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Enter your street address\"\r\n                rows=\"2\"\r\n                className={errors.street ? \"error\" : \"\"}\r\n              />\r\n              {errors.street && (\r\n                <span className=\"error-text\">{errors.street}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"address-grid\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"city\">City *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"city\"\r\n                  value={formData.city}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Enter city\"\r\n                  className={errors.city ? \"error\" : \"\"}\r\n                />\r\n                {errors.city && (\r\n                  <span className=\"error-text\">{errors.city}</span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"postcode\">Postcode *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"postcode\"\r\n                  value={formData.postcode}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Enter postcode\"\r\n                  className={errors.postcode ? \"error\" : \"\"}\r\n                />\r\n                {errors.postcode && (\r\n                  <span className=\"error-text\">{errors.postcode}</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-section\">\r\n            <h2 className=\"summary-title\">Delivery Options</h2>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"deliveryTime\">Preferred Delivery Time *</label>\r\n              <select\r\n                id=\"deliveryTime\"\r\n                value={formData.deliveryTime}\r\n                onChange={handleInputChange}\r\n                className={errors.deliveryTime ? \"error\" : \"\"}\r\n              >\r\n                <option value=\"\">Select delivery time</option>\r\n                {DELIVERY_SLOTS.map((slot) => (\r\n                  <option key={slot.display} value={slot.value}>\r\n                    {slot.display}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {errors.deliveryTime && (\r\n                <span className=\"error-message\">{errors.deliveryTime}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"specialInstructions\">\r\n                Special Instructions (Optional)\r\n              </label>\r\n              <textarea\r\n                id=\"specialInstructions\"\r\n                value={formData.specialInstructions}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Add any special delivery instructions...\"\r\n                rows=\"3\"\r\n                className=\"special-instructions\"\r\n              />\r\n            </div>\r\n\r\n            {/* Price Summary */}\r\n            <div className=\"price-summary\">\r\n              <div className=\"price-row\">\r\n                <span>Subtotal:</span>\r\n                <span>Â£{subtotal.toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"price-row\">\r\n                <span>Delivery Fee:</span>\r\n                <span>Â£{DELIVERY_FEE.toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"price-row total\">\r\n                <span>Total Amount:</span>\r\n                <span>Â£{totalPrice.toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Minimum Order Notice */}\r\n            <div className=\"order-notice\">\r\n              <p>* Minimum order: Â£{MINIMUM_ORDER_AMOUNT.toFixed(2)}</p>\r\n              <p>* Maximum {MAX_ITEMS_PER_ORDER} items per order</p>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {errors.general && (\r\n              <div className=\"error-message general\">{errors.general}</div>\r\n            )}\r\n\r\n            {/* Submit Button */}\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-button\"\r\n              disabled={isSubmitting}\r\n            >\r\n              {isSubmitting ? (\r\n                <span>Processing...</span>\r\n              ) : (\r\n                <span>Proceed to Payment â¢ Â£{totalPrice.toFixed(2)}</span>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Terms and Privacy */}\r\n          <div className=\"terms-section\">\r\n            <p>\r\n              By proceeding, you agree to our{\" \"}\r\n              <a href=\"/terms\" className=\"link\">\r\n                Terms & Conditions\r\n              </a>{\" \"}\r\n              and{\" \"}\r\n              <a href=\"/privacy\" className=\"link\">\r\n                Privacy Policy\r\n              </a>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}